---
import { SITE_TITLE } from '../consts';
import { useTranslations, type Language } from '../lib/i18n/languages';
import HeaderLink from './HeaderLink.astro';
import LanguageSwitcher from './LanguageSwitcher.astro';

interface Props {
	lang: Language;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<header class="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-200">
	<nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex items-center justify-between h-16">
			<div class="flex items-center gap-8">
				<!-- Mobile menu button (shown on mobile and tablet) -->
				<button
					id="mobile-menu-button"
					class="lg:hidden p-2 rounded-md text-gray-700 hover:text-accent hover:bg-gray-100 transition-colors"
					aria-label="Toggle menu"
				>
					<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
					</svg>
				</button>

				<h2 class="text-xl font-bold">
					<a href={`/${lang}`} class="text-primary hover:text-accent transition-colors">
						{SITE_TITLE}
					</a>
				</h2>
				<div class="hidden lg:flex items-center gap-1">
					<HeaderLink href={`/${lang}`}>{t('nav.home')}</HeaderLink>
					<HeaderLink href={`/${lang}/blog`}>{t('nav.blog')}</HeaderLink>
					<HeaderLink href={`/${lang}/about`}>{t('nav.about')}</HeaderLink>
					<HeaderLink href={`/${lang}/contact`}>{t('nav.contact')}</HeaderLink>
					<HeaderLink href={`/${lang}/social`}>{t('nav.social')}</HeaderLink>
					<HeaderLink href={`/${lang}/improvement-history`}>{t('nav.improvementHistory')}</HeaderLink>
				</div>
			</div>
			<div class="flex items-center gap-4">
				<LanguageSwitcher currentLang={lang} />
			</div>
		</div>

		<!-- Mobile menu (shown on mobile and tablet) -->
		<div id="mobile-menu" class="hidden lg:hidden pb-4 pt-2 border-t border-gray-200">
			<div class="flex flex-col gap-2">
				<HeaderLink href={`/${lang}`}>{t('nav.home')}</HeaderLink>
				<HeaderLink href={`/${lang}/blog`}>{t('nav.blog')}</HeaderLink>
				<HeaderLink href={`/${lang}/about`}>{t('nav.about')}</HeaderLink>
				<HeaderLink href={`/${lang}/contact`}>{t('nav.contact')}</HeaderLink>
				<HeaderLink href={`/${lang}/social`}>{t('nav.social')}</HeaderLink>
				<HeaderLink href={`/${lang}/improvement-history`}>{t('nav.improvementHistory')}</HeaderLink>
			</div>
		</div>
	</nav>
</header>

<script>
	const mobileMenuButton = document.getElementById('mobile-menu-button');
	const mobileMenu = document.getElementById('mobile-menu');

	mobileMenuButton?.addEventListener('click', () => {
		mobileMenu?.classList.toggle('hidden');
	});

	// Close menu when clicking a link
	mobileMenu?.querySelectorAll('a').forEach(link => {
		link.addEventListener('click', () => {
			mobileMenu.classList.add('hidden');
		});
	});
</script>
