---
import { languages, type Language } from '../lib/i18n/languages';
import { getRouteFromUrl } from '../lib/i18n/utils';

interface Props {
	currentLang: Language;
}

const { currentLang } = Astro.props;
const currentRoute = getRouteFromUrl(Astro.url.pathname);
---

<div class="language-switcher">
	{Object.entries(languages).map(([lang, label]) => (
		<a
			href={`/${lang}${currentRoute}`}
			class:list={[
				'lang-link',
				{ active: lang === currentLang }
			]}
			aria-label={`Switch to ${label}`}
		>
			{label}
		</a>
	))}
</div>

<style>
	.language-switcher {
		display: flex;
		gap: 0;
		align-items: center;
		background-color: #F3F4F6;
		border-radius: 0.5rem;
		padding: 0.25rem;
	}

	.lang-link {
		padding: 0.375rem 0.75rem;
		border-radius: 0.375rem;
		text-decoration: none;
		font-size: 0.875rem;
		font-weight: 500;
		transition: all 0.2s ease;
		background-color: transparent;
		color: #6B7280;
		position: relative;
	}

	.lang-link:hover:not(.active) {
		color: #374151;
		background-color: #E5E7EB;
	}

	.lang-link.active {
		background-color: white;
		color: #1F2937;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
	}

	@media (max-width: 720px) {
		.lang-link {
			padding: 0.25rem 0.625rem;
			font-size: 0.8125rem;
		}
	}
</style>
