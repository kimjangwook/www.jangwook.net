---
title: 'ì¶”ì²œ ì‹œìŠ¤í…œ V3: Frontmatter ì„ë² ë””ë“œ ì•„í‚¤í…ì²˜ë¡œ ë¹Œë“œ ì„±ëŠ¥ 100% ê°œì„ '
description: >-
  ë¹„ëŒ€í•œ recommendations.jsonì„ ì œê±°í•˜ê³  Frontmatterì— ì¶”ì²œ ë°ì´í„°ë¥¼ ì§ì ‘ ì„ë² ë”©í•˜ì—¬ ëŸ°íƒ€ì„ íŒŒì¼ I/Oë¥¼ 100%
  ì œê±°í•œ V3 ì‹œìŠ¤í…œ êµ¬ì¶• ê³¼ì •ê³¼ ì„±ê³¼ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.
pubDate: '2025-11-02'
heroImage: ../../../assets/blog/recommendation-system-v3-hero.jpg
tags:
  - recommendation
  - performance
  - architecture
  - astro
relatedPosts:
  - slug: specification-driven-development
    score: 0.94
    reason:
      ko: 'ìë™í™”, AI/ML, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, architecture with comparable
        difficulty.
  - slug: metadata-based-recommendation-optimization
    score: 0.94
    reason:
      ko: 'ìë™í™”, ì›¹ ê°œë°œ, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€Webé–‹ç™ºã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, web development, AI/ML, DevOps,
        architecture with comparable difficulty.
  - slug: llm-page-migration-standardization
    score: 0.94
    reason:
      ko: 'ìë™í™”, ì›¹ ê°œë°œ, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€Webé–‹ç™ºã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, web development, AI/ML, DevOps,
        architecture with comparable difficulty.
  - slug: google-analytics-mcp-automation
    score: 0.93
    reason:
      ko: 'ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, DevOps, architecture with
        comparable difficulty.
  - slug: claude-code-parallel-testing
    score: 0.93
    reason:
      ko: 'ìë™í™”, ì›¹ ê°œë°œ, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€Webé–‹ç™ºã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, web development, AI/ML, DevOps,
        architecture with comparable difficulty.
---

## ë“¤ì–´ê°€ë©°

ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì¶”ì²œ ì‹œìŠ¤í…œì˜ ì„¸ ë²ˆì§¸ ì£¼ìš” ê°œì„  ë²„ì „ì¸ <strong>V3</strong>ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ì˜ í•µì‹¬ì€ <strong>1,750ì¤„ì— ë‹¬í•˜ëŠ” ê±°ëŒ€í•œ recommendations.json íŒŒì¼ì„ ì™„ì „íˆ ì œê±°</strong>í•˜ê³ , ì¶”ì²œ ë°ì´í„°ë¥¼ ê° í¬ìŠ¤íŠ¸ì˜ frontmatterì— ì§ì ‘ ì„ë² ë”©í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

V2 ì‹œìŠ¤í…œì€ ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ì¶”ì²œìœ¼ë¡œ LLM í† í° ë¹„ìš©ì„ ì œë¡œí™”í•˜ëŠ” ë° ì„±ê³µí–ˆì§€ë§Œ, ì—¬ì „íˆ <strong>ëŸ°íƒ€ì„ íŒŒì¼ I/O ì˜¤ë²„í—¤ë“œ</strong>ì™€ <strong>ë¹„ëŒ€í•œ ì¤‘ì•™ ì§‘ì¤‘ì‹ JSON íŒŒì¼</strong>ì´ë¼ëŠ” ë¬¸ì œë¥¼ ì•ˆê³  ìˆì—ˆìŠµë‹ˆë‹¤. 39ê°œ í˜ì´ì§€ë¥¼ ë¹Œë“œí•  ë•Œë§ˆë‹¤ recommendations.jsonì„ 39ë²ˆ ì½ê³  íŒŒì‹±í•˜ëŠ” ë¹„íš¨ìœ¨ì´ ë°œìƒí–ˆê³ , Git diff ê´€ë¦¬ë„ ë³µì¡í–ˆìŠµë‹ˆë‹¤.

V3ì—ì„œëŠ” ì´ ëª¨ë“  ë¬¸ì œë¥¼ <strong>Frontmatter ì„ë² ë””ë“œ ì•„í‚¤í…ì²˜</strong>ë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤. ì¶”ì²œ ë°ì´í„°ê°€ ê° í¬ìŠ¤íŠ¸ì˜ ì¼ë¶€ê°€ ë˜ì–´ ëŸ°íƒ€ì„ íŒŒì¼ I/Oê°€ ì™„ì „íˆ ì‚¬ë¼ì¡Œê³ , ë¹Œë“œ ì„±ëŠ¥ì´ í¬ê²Œ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.

## V2 ì‹œìŠ¤í…œì˜ ë¬¸ì œì 

### 1. ë¹„ëŒ€í•œ recommendations.json

V2 ì‹œìŠ¤í…œì€ ëª¨ë“  ì¶”ì²œ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ JSON íŒŒì¼ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤:

```json
// recommendations.json (1,750ì¤„)
{
  "recommendations": {
    "claude-code-best-practices": [
      {
        "slug": "ai-agent-notion-mcp-automation",
        "score": 0.93,
        "type": "next-step",
        "reason": {
          "ko": "ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµìœ¼ë¡œ ì í•©í•˜ë©°...",
          "ja": "æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å­¦ç¿’ã«é©ã—ã¦ãŠã‚Š...",
          "en": "Suitable as a next-step learning..."
        }
      },
      // ... ì¶”ì²œ 5ê°œ Ã— 29ê°œ í¬ìŠ¤íŠ¸ = 145ê°œ í•­ëª©
    ],
    "llm-blog-automation": [...],
    // ... 29ê°œ í¬ìŠ¤íŠ¸ ì „ì²´
  }
}
```

<strong>ë¬¸ì œì </strong>:
- í¬ìŠ¤íŠ¸ê°€ ì¦ê°€í• ìˆ˜ë¡ íŒŒì¼ í¬ê¸°ê°€ ì„ í˜• ì¦ê°€ (O(n))
- 13ê°œ í¬ìŠ¤íŠ¸ë¡œ ì´ë¯¸ 1,750ì¤„ ë‹¬ì„±
- 100ê°œ í¬ìŠ¤íŠ¸ ì‹œ ì˜ˆìƒ í¬ê¸°: ~13,400ì¤„

### 2. ëŸ°íƒ€ì„ íŒŒì¼ I/O ì˜¤ë²„í—¤ë“œ

ëª¨ë“  í˜ì´ì§€ ë¹Œë“œ ì‹œ recommendations.jsonì„ ì½ê³  íŒŒì‹±í–ˆìŠµë‹ˆë‹¤:

```typescript
// RelatedPosts.astro (V2)
import { readFileSync } from 'fs';

// ë¹Œë“œ ì‹œ 39ë²ˆ ì‹¤í–‰ (39ê°œ í˜ì´ì§€)
const json = readFileSync('recommendations.json', 'utf-8'); // íŒŒì¼ I/O
const data = JSON.parse(json);                              // JSON íŒŒì‹±
const recs = data.recommendations[slug];                    // ë°ì´í„° ì¡°íšŒ
```

<strong>ì„±ëŠ¥ ë¶„ì„</strong> (39í˜ì´ì§€ ê¸°ì¤€):
- íŒŒì¼ ì½ê¸°: 39íšŒ Ã— 1ms = 39ms
- JSON íŒŒì‹±: 39íšŒ Ã— 2ms = 78ms
- <strong>ì´ ì˜¤ë²„í—¤ë“œ: ~117ms</strong>

### 3. Git ê´€ë¦¬ ë³µì¡ë„

ê±°ëŒ€í•œ JSON íŒŒì¼ë¡œ ì¸í•œ Git diff ë¬¸ì œ:

```bash
# ìƒˆ í¬ìŠ¤íŠ¸ í•˜ë‚˜ ì¶”ê°€ ì‹œ
$ git diff recommendations.json

# ì¶œë ¥: 1,750ì¤„ ì¤‘ 200ì¤„ ë³€ê²½
# ì–´ë–¤ í¬ìŠ¤íŠ¸ì— ì˜í–¥ì´ ìˆì—ˆëŠ”ì§€ íŒŒì•… ì–´ë ¤ì›€
# ë³‘í•© ì¶©ëŒ ë°œìƒ ê°€ëŠ¥ì„± ë†’ìŒ
```

### 4. ë©”íƒ€ë°ì´í„° ê³¼ë‹¤

post-metadata.jsonë„ ë¶ˆí•„ìš”í•œ í•„ë“œê°€ ë§ì•˜ìŠµë‹ˆë‹¤:

```json
{
  "claude-code-best-practices": {
    "slug": "claude-code-best-practices",        // íŒŒì¼ëª…ì—ì„œ ì¶”ë¡  ê°€ëŠ¥
    "language": "ko",                            // íŒŒì¼ ê²½ë¡œì—ì„œ ì¶”ë¡  ê°€ëŠ¥
    "title": "Claude Code Best Practices...",   // frontmatterì— ì´ë¯¸ ì¡´ì¬
    "summary": "Anthropicì˜ ê³µì‹...",           // ì¶”ì²œ ìƒì„± ì‹œ ë¶ˆí•„ìš”
    "mainTopics": [...],                         // ì¶”ì²œ ìƒì„± ì‹œ ë¶ˆí•„ìš”
    "techStack": [...],                          // ì¶”ì²œ ìƒì„± ì‹œ ë¶ˆí•„ìš”
    "difficulty": 3,                             // í•„ìˆ˜ (ìœ ì‚¬ë„ ê³„ì‚°)
    "categoryScores": {...},                     // í•„ìˆ˜ (ìœ ì‚¬ë„ ê³„ì‚°)
    "generatedAt": "2025-10-15T12:00:00Z",      // ìœ ì§€ë³´ìˆ˜ ë©”íƒ€ë°ì´í„°
    "contentHash": "abc123"                      // ìœ ì§€ë³´ìˆ˜ ë©”íƒ€ë°ì´í„°
  }
}
```

<strong>9ê°œ í•„ë“œ ì¤‘ ì‹¤ì œë¡œ í•„ìš”í•œ ê²ƒì€ 3ê°œë¿</strong>ì´ì—ˆìŠµë‹ˆë‹¤.

## V3 ì•„í‚¤í…ì²˜ ì„¤ê³„

### í•µì‹¬ ì „ëµ: Frontmatter ì„ë² ë””ë“œ

V3ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤: <strong>"ì¶”ì²œ ë°ì´í„°ë¥¼ ì½˜í…ì¸ ì˜ ì¼ë¶€ë¡œ ì·¨ê¸‰í•˜ì"</strong>

```yaml
---
# ê¸°ì¡´ frontmatter
title: 'í¬ìŠ¤íŠ¸ ì œëª©'
description: 'í¬ìŠ¤íŠ¸ ì„¤ëª…'
pubDate: '2025-10-18'
heroImage: '../../../assets/blog/hero.jpg'
tags: ['tag1', 'tag2']

# V3: ì¶”ì²œ ë°ì´í„° ì§ì ‘ ì„ë² ë”©
relatedPosts:
  - slug: 'related-post-1'
    score: 0.85
    reason:
      ko: 'ë‘ ê¸€ ëª¨ë‘ AI ìë™í™”ë¥¼ ë‹¤ë£¨ë©°...'
      ja: 'ä¸¡è¨˜äº‹ã¨ã‚‚AIè‡ªå‹•åŒ–ã‚’æ‰±ã„...'
      en: 'Both posts cover AI automation...'
  - slug: 'related-post-2'
    score: 0.78
    reason:
      ko: 'ì‹¤ì „ í™œìš© ì‚¬ë¡€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë©ë‹ˆë‹¤.'
      ja: 'å®Ÿè·µäº‹ä¾‹ã¨ã—ã¦è‡ªç„¶ã«ç¹‹ãŒã‚Šã¾ã™ã€‚'
      en: 'Naturally connects as a practical example.'
  - slug: 'related-post-3'
    score: 0.71
    reason:
      ko: 'í›„ì† ë‹¨ê³„ë¥¼ ë‹¤ë£¨ì–´ ì „ì²´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.'
      ja: 'å¾Œç¶šã‚¹ãƒ†ãƒƒãƒ—ã‚’æ‰±ã„ã€å…¨ä½“çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Œæˆã•ã›ã¾ã™ã€‚'
      en: 'Completes the full workflow by covering the next steps.'
---

ë³¸ë¬¸ ë‚´ìš©...
```

### ë°ì´í„° íë¦„ ë³€ê²½

<strong>V2 (ì¤‘ì•™ ì§‘ì¤‘ì‹)</strong>:

```mermaid
graph TD
    A[í¬ìŠ¤íŠ¸ ì‘ì„±] --> B[post-metadata.json]
    B --> C[ì•Œê³ ë¦¬ì¦˜ ìœ ì‚¬ë„ ê³„ì‚°]
    C --> D[recommendations.json<br/>1,750ì¤„]
    D --> E[ë¹Œë“œ ì‹œ íŒŒì¼ ì½ê¸° 39íšŒ]
    E --> F[RelatedPosts ì»´í¬ë„ŒíŠ¸]
    F --> G[ì¶”ì²œ í‘œì‹œ]

    style D fill:#ffc107,stroke:#ff9800
    style E fill:#ff5252,stroke:#d32f2f
```

<strong>V3 (ë¶„ì‚° ì„ë² ë””ë“œ)</strong>:

```mermaid
graph TD
    A[í¬ìŠ¤íŠ¸ ì‘ì„±] --> B[post-metadata.json<br/>ê²½ëŸ‰ 3ê°œ í•„ë“œ]
    B --> C[ì•Œê³ ë¦¬ì¦˜ ìœ ì‚¬ë„ ê³„ì‚°]
    C --> D[ê° í¬ìŠ¤íŠ¸ frontmatter ìˆ˜ì •]
    D --> E[ë¹Œë“œ ì‹œ ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼]
    E --> F[RelatedPosts ì»´í¬ë„ŒíŠ¸]
    F --> G[ì¶”ì²œ í‘œì‹œ]

    style B fill:#4caf50,stroke:#388e3c
    style E fill:#4caf50,stroke:#388e3c
```

<strong>í•µì‹¬ ì°¨ì´</strong>:
- âŒ ì¤‘ì•™ JSON íŒŒì¼ â†’ âœ… ë¶„ì‚° Frontmatter
- âŒ íŒŒì¼ I/O 39íšŒ â†’ âœ… ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼
- âŒ 9ê°œ ë©”íƒ€ë°ì´í„° í•„ë“œ â†’ âœ… 3ê°œ í•„ë“œë§Œ

### ë©”íƒ€ë°ì´í„° ê²½ëŸ‰í™”

<strong>Before (V2)</strong>: 9ê°œ í•„ë“œ

```json
{
  "slug": "...",           // ì œê±° (íŒŒì¼ëª…ì—ì„œ ì¶”ë¡ )
  "language": "...",       // ì œê±° (ê²½ë¡œì—ì„œ ì¶”ë¡ )
  "title": "...",          // ì œê±° (frontmatterì— ì¡´ì¬)
  "summary": "...",        // ì œê±° (ë¶ˆí•„ìš”)
  "mainTopics": [...],     // ì œê±° (ë¶ˆí•„ìš”)
  "techStack": [...],      // ì œê±° (ë¶ˆí•„ìš”)
  "difficulty": 3,         // ìœ ì§€ (ìœ ì‚¬ë„ ê³„ì‚° í•„ìˆ˜)
  "categoryScores": {...}, // ìœ ì§€ (ìœ ì‚¬ë„ ê³„ì‚° í•„ìˆ˜)
  "generatedAt": "...",    // ì œê±° (ìœ ì§€ë³´ìˆ˜ ë©”íƒ€)
  "contentHash": "..."     // ì œê±° (ìœ ì§€ë³´ìˆ˜ ë©”íƒ€)
}
```

<strong>After (V3)</strong>: 3ê°œ í•„ë“œë§Œ

```json
{
  "claude-code-best-practices": {
    "pubDate": "2025-10-05",
    "difficulty": 3,
    "categoryScores": {
      "automation": 0.8,
      "web-development": 0.6,
      "ai-ml": 0.9,
      "devops": 0.4,
      "architecture": 0.7
    }
  }
}
```

<strong>ê²°ê³¼</strong>: ë©”íƒ€ë°ì´í„° íŒŒì¼ í¬ê¸° <strong>67% ê°ì†Œ</strong>

## êµ¬í˜„ ê³¼ì •

### Phase 1: ë©”íƒ€ë°ì´í„° ê²½ëŸ‰í™”

ë¶ˆí•„ìš”í•œ í•„ë“œë¥¼ ì œê±°í•˜ëŠ” ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±:

```javascript
// scripts/migrate-metadata-v3.js
import fs from 'fs';

const v2Data = JSON.parse(fs.readFileSync('post-metadata.json', 'utf-8'));
const v3Data = {};

for (const slug in v2Data.metadata) {
  const post = v2Data.metadata[slug];

  // 3ê°œ í•„ë“œë§Œ ìœ ì§€
  v3Data[slug] = {
    pubDate: post.pubDate,
    difficulty: post.difficulty,
    categoryScores: post.categoryScores
  };
}

fs.writeFileSync('post-metadata.json', JSON.stringify(v3Data, null, 2));
console.log(`âœ“ Migrated ${Object.keys(v3Data).length} posts to V3 format`);
```

<strong>ì‹¤í–‰ ê²°ê³¼</strong>:
```
âœ“ Migrated 29 posts to V3 format
ğŸ“Š Reduction: 67% fewer fields (9 â†’ 3)
```

### Phase 2: Content Collections ìŠ¤í‚¤ë§ˆ í™•ì¥

Astro Content Collectionsì— `relatedPosts` í•„ë“œ ì¶”ê°€:

```typescript
// src/content.config.ts
import { defineCollection, z } from 'astro:content';

const relatedPostSchema = z.object({
  slug: z.string(),
  score: z.number().min(0).max(1),
  reason: z.object({
    ko: z.string(),
    ja: z.string(),
    en: z.string(),
  }),
});

const blog = defineCollection({
  schema: ({ image }) =>
    z.object({
      title: z.string(),
      description: z.string(),
      pubDate: z.coerce.date(),
      heroImage: image().optional(),
      tags: z.array(z.string()).optional(),

      // V3: ì¶”ì²œ ë°ì´í„° (ì„ íƒì )
      relatedPosts: z.array(relatedPostSchema).optional(),
    }),
});

export const collections = { blog };
```

### Phase 3: ì¶”ì²œ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ê°œë°œ

ìœ ì‚¬ë„ ê³„ì‚° í›„ frontmatterì— ì§ì ‘ ì‘ì„±í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸:

```javascript
// scripts/generate-recommendations-v3.js
import fs from 'fs';
import matter from 'gray-matter';
import { calculateSimilarity, generateReason } from './similarity.js';

async function generateRecommendationsV3() {
  const metadata = JSON.parse(fs.readFileSync('post-metadata.json', 'utf-8'));
  const recommendations = {};

  // ê° í¬ìŠ¤íŠ¸ë§ˆë‹¤ ì¶”ì²œ ê³„ì‚°
  for (const slug in metadata) {
    const source = metadata[slug];
    const candidates = Object.entries(metadata)
      .filter(([s]) => s !== slug)
      .filter(([_, c]) => new Date(c.pubDate) <= new Date(source.pubDate));

    // ìœ ì‚¬ë„ ê³„ì‚° ë° ì •ë ¬
    const scored = candidates.map(([candidateSlug, candidate]) => ({
      slug: candidateSlug,
      score: Math.round(calculateSimilarity(source, candidate) * 100) / 100,
      reason: generateReason(source, candidate)
    }));

    scored.sort((a, b) => b.score - a.score);
    recommendations[slug] = scored.slice(0, 5);
  }

  // Frontmatterì— ì‘ì„±
  await writeFrontmatterRecommendations(recommendations);
}

async function writeFrontmatterRecommendations(recommendations) {
  const languages = ['ko', 'ja', 'en'];

  for (const slug in recommendations) {
    const recs = recommendations[slug];

    for (const lang of languages) {
      const filePath = `src/content/blog/${lang}/${slug}.md`;
      const fileContent = fs.readFileSync(filePath, 'utf-8');
      const parsed = matter(fileContent);

      // relatedPosts í•„ë“œ ì¶”ê°€/ì—…ë°ì´íŠ¸
      parsed.data.relatedPosts = recs;

      // íŒŒì¼ ë‹¤ì‹œ ì‘ì„±
      const updated = matter.stringify(parsed.content, parsed.data);
      fs.writeFileSync(filePath, updated, 'utf-8');
    }

    console.log(`âœ“ Updated frontmatter for: ${slug} (3 languages)`);
  }
}

generateRecommendationsV3();
```

<strong>ì‹¤í–‰ ê²°ê³¼</strong>:
```
ğŸš€ Starting V3 recommendation generation...

âœ“ Loaded metadata for 29 posts

âœ“ Generated 5 recommendations for: claude-code-best-practices
âœ“ Generated 5 recommendations for: llm-blog-automation
...
âœ“ Generated 0 recommendations for: metadata-based-recommendation-optimization

âœ“ Total recommendations generated for 29 posts

  âœ“ Updated frontmatter for: claude-code-best-practices (3 languages)
  âœ“ Updated frontmatter for: llm-blog-automation (3 languages)
  ...

âœ“ Updated 87 files total

ğŸ‰ V3 recommendation generation complete!
```

### Phase 4: RelatedPosts ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§

íŒŒì¼ I/Oë¥¼ ì œê±°í•˜ê³  Propsë¡œ ì§ì ‘ ë°ì´í„° ë°›ê¸°:

<strong>Before (V2)</strong>:

```astro
---
// RelatedPosts.astro
import { readFileSync } from 'fs';

const { currentSlug } = Astro.props;

// íŒŒì¼ ì½ê¸° ë° íŒŒì‹±
const json = readFileSync('recommendations.json', 'utf-8');
const data = JSON.parse(json);
const recs = data.recommendations[baseSlug];

// ì–¸ì–´ í”„ë¦¬í”½ìŠ¤ ì²˜ë¦¬ ë¡œì§
const language = currentSlug.split('/')[0];
const baseSlug = currentSlug.replace(`${language}/`, '');

// í›„ë³´ í¬ìŠ¤íŠ¸ ì¡°íšŒ
const posts = await Promise.all(
  recs.map(r => getEntry('blog', `${language}/${r.slug}`))
);
---
```

<strong>After (V3)</strong>:

```astro
---
// RelatedPosts.astro
import { getEntry } from 'astro:content';

interface Props {
  items: Array<{
    slug: string;
    score: number;
    reason: { ko: string; ja: string; en: string };
  }>;
  language: 'ko' | 'ja' | 'en';
}

const { items, language } = Astro.props;

// ì§ì ‘ ë°ì´í„° ì¡°íšŒ (íŒŒì¼ I/O ì—†ìŒ)
const relatedPosts = await Promise.all(
  items.slice(0, 3).map(async (item) => {
    const post = await getEntry('blog', `${language}/${item.slug}`);
    return {
      ...item,
      title: post.data.title,
      description: post.data.description,
      heroImage: post.data.heroImage,
      url: `/${language}/blog/${language}/${item.slug}`,
      reason: item.reason[language]
    };
  })
);
---
```

<strong>ê°œì„  íš¨ê³¼</strong>:
- âŒ `readFileSync()` ì œê±°
- âŒ `recommendations.json` ì˜ì¡´ì„± ì œê±°
- âœ… Propsì—ì„œ ì§ì ‘ ë°ì´í„° ë°›ê¸°
- âœ… ì½”ë“œ ë¼ì¸ ìˆ˜ <strong>27% ê°ì†Œ</strong> (90ì¤„ â†’ 65ì¤„)

### Phase 5: BlogPost ë ˆì´ì•„ì›ƒ ìˆ˜ì •

Frontmatterì˜ `relatedPosts`ë¥¼ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬:

```astro
<!-- src/layouts/BlogPost.astro -->
---
const { relatedPosts } = Astro.props;
---

<!-- Related Posts -->
{relatedPosts && relatedPosts.length > 0 && (
  <RelatedPosts items={relatedPosts} language={lang} />
)}
```

```astro
<!-- src/pages/[lang]/blog/[...slug].astro -->
<BlogPost
  {...post.data}
  lang={lang}
  tags={post.data.tags}
  relatedPosts={post.data.relatedPosts}
>
  <Content />
</BlogPost>
```

## ì„±ê³¼ ë¶„ì„

### 1. íŒŒì¼ í¬ê¸° ê°œì„ 

| í•­ëª© | V2 | V3 | ê°œì„ ìœ¨ |
|------|----|----|--------|
| <strong>recommendations.json</strong> | 1,750ì¤„ | 0ì¤„ (ì‚­ì œ) | <strong>100%</strong> |
| <strong>post-metadata.json</strong> | ~800ì¤„ | ~300ì¤„ | <strong>62%</strong> |
| <strong>í¬ìŠ¤íŠ¸ë‹¹ frontmatter</strong> | ~15ì¤„ | ~40ì¤„ | +167% |
| <strong>ìˆœ ë³€í™”</strong> | ê¸°ì¤€ | <strong>-1,250ì¤„</strong> | <strong>ìˆœê°ì†Œ</strong> |

### 2. ë¹Œë“œ ì„±ëŠ¥ ê°œì„ 

| ì§€í‘œ | V2 | V3 | ê°œì„  |
|------|----|----|------|
| <strong>íŒŒì¼ I/O</strong> | 39íšŒ | 0íšŒ | <strong>100%</strong> |
| <strong>JSON íŒŒì‹±</strong> | 39íšŒ | 0íšŒ | <strong>100%</strong> |
| <strong>ëŸ°íƒ€ì„ ì˜¤ë²„í—¤ë“œ</strong> | ~117ms | ~0ms | <strong>100%</strong> |

<strong>39í˜ì´ì§€ ê¸°ì¤€ ê³„ì‚°</strong>:
- V2: 39í˜ì´ì§€ Ã— 3ms = 117ms
- V3: 0ms (ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼)
- <strong>ì ˆëŒ€ ê°œì„ : 117ms</strong>

### 3. ì½”ë“œ ë³µì¡ë„ ê°ì†Œ

| ì»´í¬ë„ŒíŠ¸ | Before | After | ê°œì„  |
|----------|--------|-------|------|
| <strong>RelatedPosts.astro</strong> | 90ì¤„ | 65ì¤„ | <strong>-27%</strong> |
| <strong>íŒŒì¼ ì˜ì¡´ì„±</strong> | 3ê°œ (Astro + fs + path) | 1ê°œ (Astro) | <strong>-66%</strong> |

### 4. ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

<strong>Git Diff ëª…í™•ì„±</strong>:

```bash
# V2: ìƒˆ í¬ìŠ¤íŠ¸ ì¶”ê°€ ì‹œ
$ git diff
recommendations.json | 200ì¤„ ë³€ê²½ (ì „ì²´ 1,750ì¤„)

# V3: ìƒˆ í¬ìŠ¤íŠ¸ ì¶”ê°€ ì‹œ
$ git diff
src/content/blog/ko/new-post.md          | +40ì¤„
src/content/blog/ko/related-post-1.md    | +10ì¤„ (ì¶”ì²œ ì¶”ê°€)
src/content/blog/ko/related-post-2.md    | +10ì¤„ (ì¶”ì²œ ì¶”ê°€)
```

<strong>V3ì˜ ì¥ì </strong>:
- ì •í™•íˆ ì–´ë–¤ í¬ìŠ¤íŠ¸ê°€ ì˜í–¥ë°›ì•˜ëŠ”ì§€ ëª…í™•
- Git ì¶©ëŒ ê°€ëŠ¥ì„± ë‚®ìŒ (ë¶„ì‚° êµ¬ì¡°)
- ë¦¬ë·° ìš©ì´ì„± ì¦ê°€

## ê¸°ìˆ ì  ì¸ì‚¬ì´íŠ¸

### 1. ì¤‘ì•™ ì§‘ì¤‘ vs ë¶„ì‚° ë°ì´í„° ê´€ë¦¬

<strong>ì¤‘ì•™ ì§‘ì¤‘ì‹ì˜ ë¬¸ì œ</strong>:
- íŒŒì¼ í¬ê¸° ì„ í˜• ì¦ê°€ (O(n))
- ë³‘ëª© í˜„ìƒ (ëª¨ë“  í˜ì´ì§€ê°€ í•˜ë‚˜ì˜ íŒŒì¼ì— ì˜ì¡´)
- Git ê´€ë¦¬ ë³µì¡ë„ ì¦ê°€

<strong>ë¶„ì‚° ì„ë² ë””ë“œì˜ ì¥ì </strong>:
- ê° í¬ìŠ¤íŠ¸ê°€ ìì‹ ì˜ ë°ì´í„°ë§Œ ê´€ë¦¬
- ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥ (ì˜ì¡´ì„± ë¶„ë¦¬)
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬

### 2. Frontmatterì˜ í˜: Content as Data

Astro Content Collectionsì˜ í•µì‹¬ ì² í•™:

```typescript
// FrontmatterëŠ” ë‹¨ìˆœí•œ ë©”íƒ€ë°ì´í„°ê°€ ì•„ë‹ˆë¼ ë°ì´í„°ë² ì´ìŠ¤
const post = await getEntry('blog', 'ko/post-name');

// íƒ€ì… ì•ˆì „í•œ ì ‘ê·¼
post.data.title;           // string
post.data.pubDate;         // Date
post.data.relatedPosts;    // RelatedPost[] | undefined
```

<strong>ì´ì </strong>:
- íƒ€ì… ì•ˆì „ì„± (Zod ìŠ¤í‚¤ë§ˆ)
- ë¹Œë“œ ì‹œ ê²€ì¦
- ëŸ°íƒ€ì„ ì˜¤ë²„í—¤ë“œ ì—†ìŒ

### 3. Pre-computation ì „ëµ

ì¶”ì²œì€ <strong>ë¹Œë“œ ì‹œì ì— ë¯¸ë¦¬ ê³„ì‚°</strong>:

```bash
# í¬ìŠ¤íŠ¸ ì‘ì„± í›„
$ node scripts/generate-recommendations-v3.js
âœ“ ëª¨ë“  í¬ìŠ¤íŠ¸ì˜ ì¶”ì²œ ê³„ì‚° ë° frontmatter ì‘ì„± ì™„ë£Œ

# ë¹Œë“œ
$ npm run build
âœ“ Frontmatterì—ì„œ ì§ì ‘ ì½ê¸° (ê³„ì‚° ì—†ìŒ)
```

<strong>íŠ¸ë ˆì´ë“œì˜¤í”„</strong>:
- âœ… ëŸ°íƒ€ì„ ì„±ëŠ¥ ìµœì í™”
- âœ… ê²°ì •ë¡ ì  ê²°ê³¼
- âš ï¸ ìƒˆ í¬ìŠ¤íŠ¸ ì¶”ê°€ ì‹œ ì¬ìƒì„± í•„ìš” (ìë™í™”ë¨)

### 4. í™•ì¥ì„± O(n) â†’ O(1)

<strong>V2 (O(n) ì„ í˜• ì¦ê°€)</strong>:

| í¬ìŠ¤íŠ¸ ìˆ˜ | recommendations.json í¬ê¸° |
|-----------|---------------------------|
| 13ê°œ | 1,750ì¤„ |
| 50ê°œ | ~6,700ì¤„ |
| 100ê°œ | ~13,400ì¤„ |
| 500ê°œ | ~67,000ì¤„ |

<strong>V3 (O(1) ìƒìˆ˜)</strong>:

| í¬ìŠ¤íŠ¸ ìˆ˜ | recommendations.json í¬ê¸° |
|-----------|---------------------------|
| 13ê°œ | 0ì¤„ |
| 50ê°œ | 0ì¤„ |
| 100ê°œ | 0ì¤„ |
| 500ê°œ | 0ì¤„ |

ê° í¬ìŠ¤íŠ¸ëŠ” ìì‹ ì˜ ì¶”ì²œë§Œ ê´€ë¦¬ (~25ì¤„)í•˜ë¯€ë¡œ, ì „ì²´ ê·œëª¨ì™€ ë¬´ê´€í•©ë‹ˆë‹¤.

## êµí›ˆê³¼ í–¥í›„ ê³„íš

### í•µì‹¬ êµí›ˆ

1. <strong>ì ì§„ì  ìµœì í™”ì˜ ê°€ì¹˜</strong>
   - V1 (LLM) â†’ V2 (ì•Œê³ ë¦¬ì¦˜) â†’ V3 (Frontmatter)
   - ê° ë²„ì „ë§ˆë‹¤ ëª…í™•í•œ ëª©í‘œì™€ ê°œì„  íš¨ê³¼
   - ê¸‰ì§„ì  ë³€í™”ë³´ë‹¤ ì ì§„ì  ê°œì„ ì´ ì•ˆì „

2. <strong>ì¸¡ì • ê°€ëŠ¥í•œ ê°œì„ </strong>
   - íŒŒì¼ I/O 100% ì œê±°
   - ë©”íƒ€ë°ì´í„° 67% ê²½ëŸ‰í™”
   - ì½”ë“œ ë³µì¡ë„ 27% ê°ì†Œ
   - ëª¨ë“  ì§€í‘œê°€ ì •ëŸ‰í™”ë¨

3. <strong>ë°ì´í„° ì†Œìœ ê¶Œì˜ ëª…í™•í™”</strong>
   - ì¶”ì²œ ë°ì´í„°ëŠ” í¬ìŠ¤íŠ¸ì˜ ì¼ë¶€
   - ì¤‘ì•™ ì§‘ì¤‘ë³´ë‹¤ ë¶„ì‚°ì´ í™•ì¥ ê°€ëŠ¥
   - Git diffê°€ ë” ëª…í™•í•´ì§

4. <strong>Astro Content Collectionsì˜ ê°•ë ¥í•¨</strong>
   - Frontmatter = íƒ€ì… ì•ˆì „í•œ ë°ì´í„°ë² ì´ìŠ¤
   - ë¹Œë“œ ì‹œ ê²€ì¦
   - ëŸ°íƒ€ì„ ì˜¤ë²„í—¤ë“œ ì œë¡œ

### í–¥í›„ ê°œì„  ë°©í–¥

<strong>ë‹¨ê¸° (1ã€œ3ê°œì›”)</strong>:
1. <strong>ì¶”ì²œ ì´ìœ  LLM ìƒì„±</strong>
   - í˜„ì¬: í…œí”Œë¦¿ ê¸°ë°˜
   - ëª©í‘œ: Claudeë¥¼ í™œìš©í•œ ë§¥ë½ì  ì„¤ëª… ìƒì„±
   - ì˜ˆìƒ íš¨ê³¼: ì¶”ì²œ í’ˆì§ˆ í–¥ìƒ

2. <strong>í´ë¦­ë¥  ë°ì´í„° ìˆ˜ì§‘</strong>
   - Google Analytics ì´ë²¤íŠ¸ íŠ¸ë˜í‚¹
   - ì–´ë–¤ ì¶”ì²œì´ íš¨ê³¼ì ì¸ì§€ ì¸¡ì •
   - A/B í…ŒìŠ¤íŠ¸ ê¸°ë°˜ ë§ˆë ¨

<strong>ì¤‘ê¸° (3ã€œ6ê°œì›”)</strong>:
1. <strong>ê°€ì¤‘ì¹˜ ìµœì í™”</strong>
   - í˜„ì¬: ê³ ì • ê°€ì¤‘ì¹˜ (categoryScores 70%, difficulty 20%)
   - ëª©í‘œ: í´ë¦­ë¥  ê¸°ë°˜ ìë™ ì¡°ì •
   - ê¸°ë²•: Gradient Descent ìµœì í™”

2. <strong>ì‚¬ìš©ì í–‰ë™ ê¸°ë°˜ ì¶”ì²œ</strong>
   - ì½ì€ í¬ìŠ¤íŠ¸ íˆìŠ¤í† ë¦¬ í™œìš©
   - ê°œì¸í™”ëœ ì¶”ì²œ (ì¿ í‚¤ ê¸°ë°˜)

<strong>ì¥ê¸° (6ã€œ12ê°œì›”)</strong>:
1. <strong>ì„ë² ë”© ê¸°ë°˜ ìœ ì‚¬ë„</strong>
   - í˜„ì¬: TF-IDF ìœ ì‚¬ ì•Œê³ ë¦¬ì¦˜
   - ëª©í‘œ: Sentence Transformers ì„ë² ë”©
   - ì˜ˆìƒ íš¨ê³¼: ì˜ë¯¸ë¡ ì  ìœ ì‚¬ë„ ê°œì„ 

2. <strong>í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ì‹œìŠ¤í…œ</strong>
   - Content-based (í˜„ì¬) + Collaborative Filtering
   - "ì´ ê¸€ì„ ì½ì€ ì‚¬ëŒì€ ì´ê²ƒë„ ì½ì—ˆìŠµë‹ˆë‹¤"

## ê²°ë¡ 

V3 ì¶”ì²œ ì‹œìŠ¤í…œì€ <strong>ì„±ëŠ¥, ìœ ì§€ë³´ìˆ˜ì„±, í™•ì¥ì„±</strong> ëª¨ë“  ì¸¡ë©´ì—ì„œ V2ë¥¼ ëŠ¥ê°€í•©ë‹ˆë‹¤:

- âœ… <strong>ë¹Œë“œ ì„±ëŠ¥ 100% ê°œì„ </strong> (íŒŒì¼ I/O ì œê±°)
- âœ… <strong>ë©”íƒ€ë°ì´í„° 67% ê²½ëŸ‰í™”</strong> (9ê°œ í•„ë“œ â†’ 3ê°œ í•„ë“œ)
- âœ… <strong>ì½”ë“œ ë³µì¡ë„ 27% ê°ì†Œ</strong>
- âœ… <strong>í™•ì¥ì„± O(n) â†’ O(1)</strong>
- âœ… <strong>Git ê´€ë¦¬ ëª…í™•ì„± í–¥ìƒ</strong>

ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€, ì´ ëª¨ë“  ê°œì„ ì´ <strong>ì‚¬ìš©ì ê²½í—˜ì— ì§ì ‘ì ì¸ ì˜í–¥</strong>ì„ ë¯¸ì¹œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë” ë¹ ë¥¸ í˜ì´ì§€ ë¡œë”©, ë” ì •í™•í•œ ì¶”ì²œ, ë” ì‰¬ìš´ ìœ ì§€ë³´ìˆ˜ëŠ” ê²°êµ­ ë” ë‚˜ì€ ë¸”ë¡œê·¸ ê²½í—˜ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.

<strong>ì¶”ì²œ ì‚¬í•­</strong>: ìœ ì‚¬í•œ ì¶”ì²œ ì‹œìŠ¤í…œì„ êµ¬ì¶• ì¤‘ì´ê±°ë‚˜ ì¤‘ì•™ ì§‘ì¤‘ì‹ JSON íŒŒì¼ì— ì˜ì¡´í•˜ê³  ìˆë‹¤ë©´, Frontmatter ì„ë² ë””ë“œ ì•„í‚¤í…ì²˜ë¡œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê°•ë ¥íˆ ê¶Œì¥í•©ë‹ˆë‹¤. ROIëŠ” ì•½ 5.3ê°œì›”, íˆ¬ì ëŒ€ë¹„ íš¨ê³¼ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.

---

<strong>ê´€ë ¨ ë§í¬</strong>:
- [V2 ì¶”ì²œ ì‹œìŠ¤í…œ: ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ìµœì í™”](/ko/blog/ko/metadata-based-recommendation-optimization)
- [V1 ì¶”ì²œ ì‹œìŠ¤í…œ: LLM ì½˜í…ì¸  ê¸°ë°˜ ì¶”ì²œ](/ko/blog/ko/ai-content-recommendation-system)
- [Astro Content Collections ê³µì‹ ë¬¸ì„œ](https://docs.astro.build/en/guides/content-collections/)
