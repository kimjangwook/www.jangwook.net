---
title: Claude Code Hookã§æ§‹ç¯‰ã™ã‚‹è‡ªå‹•ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
description: Hook ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦å‰‡è¨­å®šã‹ã‚‰ CI/CD çµ±åˆã¾ã§ã€å®Ÿå‹™ã§å³é©ç”¨å¯èƒ½ãªè‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹å®Œå…¨ã‚¬ã‚¤ãƒ‰
pubDate: '2025-10-29'
heroImage: ../../../assets/blog/claude-code-hooks-workflow-hero.jpg
tags:
  - claude-code
  - hooks
  - automation
  - code-review
  - workflow
relatedPosts:
  - slug: bigquery-mcp-prefix-filtering
    score: 0.94
    reason:
      ko: 'ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, DevOps, architecture with
        comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: google-analytics-mcp-automation
    score: 0.92
    reason:
      ko: 'ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, DevOps, architecture with
        comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: langgraph-multi-agent
    score: 0.92
    reason:
      ko: 'ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, DevOps, architecture with
        comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: openai-agentkit-tutorial-part2
    score: 0.92
    reason:
      ko: 'ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, DevOps, architecture with
        comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: self-healing-ai-systems
    score: 0.92
    reason:
      ko: 'ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµìœ¼ë¡œ ì í•©í•˜ë©°, ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ì£¼ì œì—ì„œ ì—°ê²°ë©ë‹ˆë‹¤.'
      ja: æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å­¦ç¿’ã«é©ã—ã¦ãŠã‚Šã€è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒˆãƒ”ãƒƒã‚¯ã§ç¹‹ãŒã‚Šã¾ã™ã€‚
      en: >-
        Suitable as a next-step learning resource, connecting through
        automation, AI/ML, DevOps, architecture topics.
      zh: é€‚åˆä½œä¸ºä¸‹ä¸€æ­¥å­¦ä¹ èµ„æºï¼Œé€šè¿‡è‡ªåŠ¨åŒ–ã€AI/MLã€DevOpsã€æ¶æ„ä¸»é¢˜è¿›è¡Œè¿æ¥ã€‚
---

## æ¦‚è¦

AI ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¯ç”Ÿç”£æ€§ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¾ã™ãŒã€<strong>ä¸€è²«ã—ãŸã‚³ãƒ¼ãƒ‰å“è³ªã¨ãƒ«ãƒ¼ãƒ«éµå®ˆ</strong>ã‚’ä¿è¨¼ã™ã‚‹ã“ã¨ã¯ä¾ç„¶ã¨ã—ã¦é›£ã—ã„èª²é¡Œã§ã™ã€‚Claude Code ã® <strong>Hook ã‚·ã‚¹ãƒ†ãƒ </strong>ã¯ã€ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹å¼·åŠ›ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

Hook ã¯ç‰¹å®šã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¹ãƒ†ãƒƒãƒ—ã§è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰ä½œæˆã€ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã€ã‚³ãƒŸãƒƒãƒˆå‰å¾Œãªã©ã€ã•ã¾ã–ã¾ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚«ã‚¹ã‚¿ãƒ æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒ¿å…¥ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãƒ†ã‚¹ãƒˆã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã€ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãªã©ã‚’å®Œå…¨ã«è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚

### ã“ã®è¨˜äº‹ã§å–ã‚Šä¸Šã’ã‚‹å†…å®¹

- Hook ã‚·ã‚¹ãƒ†ãƒ ã®æ ¸å¿ƒæ¦‚å¿µã¨å‹•ä½œåŸç†
- æ§˜ã€…ãª Hook ã‚¿ã‚¤ãƒ—ã¨æ´»ç”¨äº‹ä¾‹
- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦å‰‡ã®è‡ªå‹•æ¤œè¨¼å®Ÿè£…
- è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã®æ§‹ç¯‰
- CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆæˆ¦ç•¥
- å®Ÿè·µä¾‹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

## Hook ã‚·ã‚¹ãƒ†ãƒ ã‚’ç†è§£ã™ã‚‹

### Hook ã¨ã¯?

Claude Code Hook ã¯<strong>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ç‰¹å®šæ™‚ç‚¹ã§å®Ÿè¡Œã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</strong>ã§ã™ã€‚Git hook ã¨ä¼¼ãŸæ¦‚å¿µã§ã™ãŒã€Claude ã® AI ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ç‰¹åŒ–ã—ã¦ã„ã¾ã™ã€‚

```mermaid
graph LR
    A[Claude ä½œæ¥­é–‹å§‹] --> B{Pre Hook}
    B -->|é€šé| C[Claude ä½œæ¥­å®Ÿè¡Œ]
    B -->|å¤±æ•—| D[ä½œæ¥­ä¸­æ–­]
    C --> E{Post Hook}
    E -->|é€šé| F[ä½œæ¥­å®Œäº†]
    E -->|å¤±æ•—| G[ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯/è­¦å‘Š]
```

### Hook å®Ÿè¡Œãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

Hook ã¯çµ‚äº†ã‚³ãƒ¼ãƒ‰(exit code)ã§ Claude ã®å‹•ä½œã‚’åˆ¶å¾¡ã—ã¾ã™:

```bash
# æˆåŠŸ (ä½œæ¥­ç¶™ç¶š)
exit 0

# å¤±æ•— (ä½œæ¥­ä¸­æ–­)
exit 1

# è­¦å‘Š (ä½œæ¥­ç¶™ç¶šã™ã‚‹ãŒè­¦å‘Šè¡¨ç¤º)
exit 2
```

### Hook ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
.claude/
â””â”€â”€ hooks/
    â”œâ”€â”€ pre-file-write.sh      # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å‰ã«å®Ÿè¡Œ
    â”œâ”€â”€ post-file-write.py     # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å¾Œã«å®Ÿè¡Œ
    â”œâ”€â”€ pre-commit.sh          # ã‚³ãƒŸãƒƒãƒˆå‰ã«å®Ÿè¡Œ
    â”œâ”€â”€ post-commit.py         # ã‚³ãƒŸãƒƒãƒˆå¾Œã«å®Ÿè¡Œ
    â””â”€â”€ code-review.js         # ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ Hook
```

## Hook è¨­å®šã¨æ§‹æˆ

### 1. åŸºæœ¬ Hook ä½œæˆ

æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãª Hook ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†:

````bash
#!/bin/bash
# .claude/hooks/pre-file-write.sh

# Hook å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¯ JSON ã§æ¸¡ã•ã‚Œã‚‹
input=$(cat)

# ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹æŠ½å‡º
file_path=$(echo "$input" | jq -r '.file_path')

echo "Checking file: $file_path"

# æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿è­·
if [[ "$file_path" == *".env"* ]] || [[ "$file_path" == *"credentials"* ]]; then
    echo "Error: Cannot modify sensitive files"
    exit 1
fi

# æˆåŠŸ
exit 0
````

### 2. å®Ÿè¡Œæ¨©é™è¨­å®š

Hook ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å®Ÿè¡Œå¯èƒ½ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

```bash
chmod +x .claude/hooks/pre-file-write.sh

# ã™ã¹ã¦ã® Hook ã«å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x .claude/hooks/*.sh
chmod +x .claude/hooks/*.py
```

### 3. Hook ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

Claude ã¯ Hook ã« JSON å½¢å¼ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’æ¸¡ã—ã¾ã™:

```json
{
  "file_path": "src/components/Button.tsx",
  "operation": "write",
  "content": "...",
  "metadata": {
    "timestamp": "2025-10-29T10:30:00Z",
    "user": "developer@example.com"
  }
}
```

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦å‰‡ã®è‡ªå‹•æ¤œè¨¼

### 1. TypeScript å‹ãƒã‚§ãƒƒã‚¯ Hook

```bash
#!/bin/bash
# .claude/hooks/typescript-check.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# TypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿æ¤œæŸ»
if [[ "$file_path" != *.ts ]] && [[ "$file_path" != *.tsx ]]; then
    exit 0
fi

echo "Running TypeScript type check..."

# å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
npx tsc --noEmit "$file_path" 2>&1 | tee /tmp/tsc-output.txt

if [ ${PIPESTATUS[0]} -ne 0 ]; then
    echo "âŒ Type check failed"
    cat /tmp/tsc-output.txt
    exit 1
fi

echo "âœ… Type check passed"
exit 0
```

### 2. ESLint ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚° Hook

```python
#!/usr/bin/env python3
# .claude/hooks/eslint-check.py

import sys
import json
import subprocess

def main():
    # å…¥åŠ›ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚Š
    input_data = json.loads(sys.stdin.read())
    file_path = input_data.get('file_path', '')

    # JavaScript/TypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿æ¤œæŸ»
    if not (file_path.endswith('.js') or
            file_path.endswith('.ts') or
            file_path.endswith('.jsx') or
            file_path.endswith('.tsx')):
        sys.exit(0)

    print(f"Running ESLint on {file_path}...")

    # ESLint å®Ÿè¡Œ
    result = subprocess.run(
        ['npx', 'eslint', file_path, '--format', 'json'],
        capture_output=True,
        text=True
    )

    if result.returncode != 0:
        lint_results = json.loads(result.stdout)

        # ã‚¨ãƒ©ãƒ¼æ¦‚è¦å‡ºåŠ›
        for file_result in lint_results:
            for message in file_result.get('messages', []):
                severity = 'Error' if message['severity'] == 2 else 'Warning'
                print(f"{severity}: {message['message']} "
                      f"(line {message['line']}, col {message['column']})")

        sys.exit(1)

    print("âœ… ESLint passed")
    sys.exit(0)

if __name__ == '__main__':
    main()
```

### 3. ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè‡ªå‹•é©ç”¨

```bash
#!/bin/bash
# .claude/hooks/post-file-write.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­
if [[ "$file_path" =~ \.(js|ts|jsx|tsx|json|css|scss)$ ]]; then
    echo "Auto-formatting $file_path with Prettier..."

    npx prettier --write "$file_path"

    if [ $? -eq 0 ]; then
        echo "âœ… Formatted successfully"
    else
        echo "âš ï¸  Formatting failed, but continuing..."
    fi
fi

exit 0
```

## è‡ªå‹•ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹

### 1. åŒ…æ‹¬çš„ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ Hook

```bash
#!/bin/bash
# .claude/hooks/comprehensive-review.sh

set -e

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

echo "ğŸ” Starting comprehensive code review for $file_path"

# æ®µéšçš„æ¤œè¨¼
declare -a checks=(
    "Security scan"
    "Type checking"
    "Linting"
    "Test coverage"
    "Documentation check"
)

# 1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
echo "ğŸ”’ ${checks[0]}..."
if command -v semgrep &> /dev/null; then
    semgrep --config=auto "$file_path" --quiet
fi

# 2. å‹ãƒã‚§ãƒƒã‚¯
echo "ğŸ“ ${checks[1]}..."
if [[ "$file_path" =~ \.(ts|tsx)$ ]]; then
    npx tsc --noEmit "$file_path"
fi

# 3. ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°
echo "âœ¨ ${checks[2]}..."
if [[ "$file_path" =~ \.(js|ts|jsx|tsx)$ ]]; then
    npx eslint "$file_path"
fi

# 4. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
echo "ğŸ§ª ${checks[3]}..."
test_file="${file_path/src/tests}"
test_file="${test_file/.ts/.test.ts}"

if [ ! -f "$test_file" ]; then
    echo "âš ï¸  Warning: No test file found at $test_file"
    # è­¦å‘Šã®ã¿ã§ç¶™ç¶š
fi

# 5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª
echo "ğŸ“š ${checks[4]}..."
if [[ "$file_path" =~ \.(ts|tsx|js|jsx)$ ]]; then
    # JSDoc ã‚³ãƒ¡ãƒ³ãƒˆæ¤œæŸ»
    if ! grep -q "\/\*\*" "$file_path"; then
        echo "âš ï¸  Warning: No JSDoc comments found"
    fi
fi

echo "âœ… Code review completed successfully"
exit 0
```

### 2. SOX/SOC2 ç›£æŸ»è¿½è·¡ Hook

```python
#!/usr/bin/env python3
# .claude/hooks/audit-trail.py

import sys
import json
import hashlib
from datetime import datetime
import os

AUDIT_LOG = '.claude/audit/trail.jsonl'

def main():
    # å…¥åŠ›ãƒ‡ãƒ¼ã‚¿
    input_data = json.loads(sys.stdin.read())

    # ç›£æŸ»ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
    os.makedirs(os.path.dirname(AUDIT_LOG), exist_ok=True)

    # ç›£æŸ»ã‚¨ãƒ³ãƒˆãƒªä½œæˆ
    audit_entry = {
        'timestamp': datetime.utcnow().isoformat(),
        'operation': input_data.get('operation', 'unknown'),
        'file_path': input_data.get('file_path', ''),
        'user': os.environ.get('USER', 'unknown'),
        'content_hash': hashlib.sha256(
            input_data.get('content', '').encode()
        ).hexdigest(),
        'metadata': input_data.get('metadata', {})
    }

    # JSONL å½¢å¼ã§ãƒ­ã‚°è¿½åŠ 
    with open(AUDIT_LOG, 'a') as f:
        f.write(json.dumps(audit_entry) + '\n')

    print(f"âœ… Audit trail recorded: {audit_entry['timestamp']}")
    sys.exit(0)

if __name__ == '__main__':
    main()
```

### 3. Pull Request è‡ªå‹•æ¤œè¨¼

```bash
#!/bin/bash
# .claude/hooks/pr-validation.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

echo "ğŸ” PR Validation Checks"

# ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
declare -A checks=(
    ["Tests"]="npm test"
    ["Build"]="npm run build"
    ["Type Check"]="npm run typecheck"
    ["Lint"]="npm run lint"
)

failed=0

for check_name in "${!checks[@]}"; do
    echo ""
    echo "Running: $check_name"

    if eval "${checks[$check_name]}" > /tmp/check-output.txt 2>&1; then
        echo "âœ… $check_name passed"
    else
        echo "âŒ $check_name failed"
        cat /tmp/check-output.txt
        failed=1
    fi
done

if [ $failed -eq 1 ]; then
    echo ""
    echo "âŒ PR validation failed. Please fix the issues before committing."
    exit 1
fi

echo ""
echo "âœ… All PR validation checks passed"
exit 0
```

## CI/CD çµ±åˆæˆ¦ç•¥

### 1. GitHub Actions çµ±åˆ

```yaml
# .github/workflows/claude-hooks.yml
name: Claude Code Hooks

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  run-hooks:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm ci

      - name: Make hooks executable
        run: chmod +x .claude/hooks/*.sh

      - name: Run pre-commit hooks
        run: |
          for file in $(git diff --name-only origin/main); do
            if [ -f ".claude/hooks/pre-commit.sh" ]; then
              echo "{\"file_path\": \"$file\"}" | .claude/hooks/pre-commit.sh
            fi
          done

      - name: Run code review hook
        run: |
          for file in $(git diff --name-only origin/main); do
            if [ -f ".claude/hooks/code-review.sh" ]; then
              echo "{\"file_path\": \"$file\"}" | .claude/hooks/code-review.sh
            fi
          done
```

### 2. N8N ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªå‹•åŒ–

Hook å®Ÿè¡Œçµæœã‚’ N8N ã«é€ä¿¡ã—ã¦é€šçŸ¥è‡ªå‹•åŒ–:

```bash
#!/bin/bash
# .claude/hooks/notify-n8n.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# N8N webhook URL (ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å–å¾—)
WEBHOOK_URL="${N8N_WEBHOOK_URL}"

if [ -z "$WEBHOOK_URL" ]; then
    echo "Warning: N8N_WEBHOOK_URL not set"
    exit 0
fi

# é€šçŸ¥ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ä½œæˆ
payload=$(cat <<EOF
{
  "event": "code_review_completed",
  "file": "$file_path",
  "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
  "status": "success"
}
EOF
)

# N8N ã¸é€ä¿¡
curl -X POST "$WEBHOOK_URL" \
  -H "Content-Type: application/json" \
  -d "$payload" \
  --silent

exit 0
```

### 3. Telegram é€šçŸ¥çµ±åˆ

```python
#!/usr/bin/env python3
# .claude/hooks/telegram-notify.py

import sys
import json
import os
import requests

def send_telegram_message(message):
    bot_token = os.environ.get('TELEGRAM_BOT_TOKEN')
    chat_id = os.environ.get('TELEGRAM_CHAT_ID')

    if not bot_token or not chat_id:
        print("Warning: Telegram credentials not set")
        return

    url = f"https://api.telegram.org/bot{bot_token}/sendMessage"
    payload = {
        'chat_id': chat_id,
        'text': message,
        'parse_mode': 'Markdown'
    }

    try:
        requests.post(url, json=payload, timeout=5)
    except Exception as e:
        print(f"Warning: Failed to send Telegram notification: {e}")

def main():
    input_data = json.loads(sys.stdin.read())
    file_path = input_data.get('file_path', 'unknown')

    message = f"""
ğŸ” *Code Review Completed*

ğŸ“ File: `{file_path}`
âœ… All checks passed
ğŸ• {input_data.get('metadata', {}).get('timestamp', 'N/A')}
"""

    send_telegram_message(message)
    sys.exit(0)

if __name__ == '__main__':
    main()
```

## å®Ÿè·µä¾‹ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. æ®µéšçš„ Hook å°å…¥æˆ¦ç•¥

Hook ã‚’ä¸€åº¦ã«ã™ã¹ã¦é©ç”¨ã™ã‚‹ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒé…ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ®µéšçš„å°å…¥æˆ¦ç•¥:

```mermaid
graph TD
    A[Phase 1: éç ´å£Šçš„ Hook] --> B[Phase 2: è­¦å‘Šãƒ¬ãƒ™ãƒ« Hook]
    B --> C[Phase 3: ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚° Hook]

    A1[ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ] --> A
    A2[ç›£æŸ»ãƒ­ã‚°] --> A

    B1[ãƒªãƒ³ãƒˆè­¦å‘Š] --> B
    B2[ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª] --> B

    C1[å‹ãƒã‚§ãƒƒã‚¯å¼·åˆ¶] --> C
    C2[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³å¼·åˆ¶] --> C
```

<strong>Phase 1 å®Ÿè£…:</strong>

```bash
#!/bin/bash
# .claude/hooks/phase1-gentle.sh

input=$(cat)

# å¸¸ã«æˆåŠŸã™ã‚‹ãŒæƒ…å ±æä¾›
echo "â„¹ï¸  Code formatting applied"
echo "â„¹ï¸  Audit trail recorded"

exit 0
```

<strong>Phase 2 å®Ÿè£…:</strong>

```bash
#!/bin/bash
# .claude/hooks/phase2-warnings.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°å®Ÿè¡Œã™ã‚‹ãŒå¤±æ•—ã—ã¦ã‚‚ç¶™ç¶š
npx eslint "$file_path" || echo "âš ï¸  Linting issues found"

# è­¦å‘Šã‚³ãƒ¼ãƒ‰ã§çµ‚äº†
exit 2
```

<strong>Phase 3 å®Ÿè£…:</strong>

```bash
#!/bin/bash
# .claude/hooks/phase3-blocking.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# å‹ãƒã‚§ãƒƒã‚¯å¤±æ•—æ™‚ã¯ä¸­æ–­
npx tsc --noEmit "$file_path"

if [ $? -ne 0 ]; then
    echo "âŒ Type check failed - blocking operation"
    exit 1
fi

exit 0
```

### 2. Hook æ¡ä»¶ä»˜ãå®Ÿè¡Œ

ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã¹ã¦ã® Hook ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“:

```bash
#!/bin/bash
# .claude/hooks/conditional-hooks.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# æ¡ä»¶åˆ¥ Hook å®Ÿè¡Œ
case "$file_path" in
    *.ts|*.tsx)
        echo "Running TypeScript checks..."
        .claude/hooks/typescript-check.sh <<< "$input"
        ;;
    *.py)
        echo "Running Python checks..."
        .claude/hooks/python-check.sh <<< "$input"
        ;;
    *.md)
        echo "Running Markdown lint..."
        .claude/hooks/markdown-lint.sh <<< "$input"
        ;;
    *)
        echo "No specific checks for this file type"
        ;;
esac

exit 0
```

### 3. Hook ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

Hook ãŒé…ã™ãã‚‹ã¨é–‹ç™ºä½“é¨“ãŒæãªã‚ã‚Œã¾ã™:

```bash
#!/bin/bash
# .claude/hooks/optimized-hook.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š (5ç§’)
TIMEOUT=5

# ä¸¦åˆ—å®Ÿè¡Œ
(
    timeout $TIMEOUT npx eslint "$file_path" &
    timeout $TIMEOUT npx prettier --check "$file_path" &
    wait
) 2>/dev/null

if [ $? -eq 124 ]; then
    echo "âš ï¸  Hook timeout - skipping detailed checks"
    exit 2
fi

exit 0
```

### 4. ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã‚’æ´»ç”¨ã—ãŸæœ€é©åŒ–

```bash
#!/bin/bash
# .claude/hooks/cached-checks.sh

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')
content=$(echo "$input" | jq -r '.content')

# ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒƒã‚·ãƒ¥ç”Ÿæˆ
content_hash=$(echo "$content" | sha256sum | cut -d' ' -f1)
cache_dir=".claude/cache"
cache_file="$cache_dir/$content_hash"

mkdir -p "$cache_dir"

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
if [ -f "$cache_file" ]; then
    cache_result=$(cat "$cache_file")
    echo "âœ… Using cached result: $cache_result"
    exit 0
fi

# å®Ÿéš›ã®æ¤œæŸ»å®Ÿè¡Œ
echo "Running checks..."
npx eslint "$file_path"

if [ $? -eq 0 ]; then
    echo "passed" > "$cache_file"
    exit 0
else
    echo "failed" > "$cache_file"
    exit 1
fi
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ãƒ’ãƒ³ãƒˆ

### 1. Hook è¨­è¨ˆåŸå‰‡

<strong>SOLID åŸå‰‡ã‚’ Hook ã«é©ç”¨:</strong>

- <strong>Single Responsibility</strong>: ä¸€ã¤ã® Hook ã¯ä¸€ã¤ã®è²¬ä»»ã®ã¿
- <strong>Open/Closed</strong>: æ‹¡å¼µã«ã¯é–‹ã‹ã‚Œã€å¤‰æ›´ã«ã¯é–‰ã˜ã¦ã„ã‚‹
- <strong>Liskov Substitution</strong>: Hook ã‚’äº¤æ›å¯èƒ½ã«è¨­è¨ˆ
- <strong>Interface Segregation</strong>: å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿è¦æ±‚
- <strong>Dependency Inversion</strong>: å…·ä½“çš„å®Ÿè£…ã§ã¯ãªãæŠ½è±¡åŒ–ã«ä¾å­˜

### 2. ã‚¨ãƒ©ãƒ¼å‡¦ç†æˆ¦ç•¥

```bash
#!/bin/bash
# .claude/hooks/error-handling.sh

set -euo pipefail  # ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚å³åº§ã«ä¸­æ–­

input=$(cat)

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
ERROR_LOG=".claude/logs/hook-errors.log"
mkdir -p "$(dirname "$ERROR_LOG")"

# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
handle_error() {
    local exit_code=$?
    local line_num=$1

    echo "Error on line $line_num (exit code: $exit_code)" | tee -a "$ERROR_LOG"

    # ã‚¨ãƒ©ãƒ¼è©³ç´°æƒ…å ±ã‚’ãƒ­ã‚°è¨˜éŒ²
    echo "Input data:" >> "$ERROR_LOG"
    echo "$input" >> "$ERROR_LOG"
    echo "---" >> "$ERROR_LOG"

    exit 1
}

# ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒãƒ—è¨­å®š
trap 'handle_error $LINENO' ERR

# Hook ãƒ­ã‚¸ãƒƒã‚¯...
echo "Executing hook logic..."

exit 0
```

### 3. ãƒ†ã‚¹ãƒˆå¯èƒ½ãª Hook ä½œæˆ

```bash
#!/bin/bash
# .claude/hooks/testable-hook.sh

# ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚µãƒãƒ¼ãƒˆ
TEST_MODE=${TEST_MODE:-false}

if [ "$TEST_MODE" = "true" ]; then
    # ãƒ†ã‚¹ãƒˆç”¨å…¥åŠ›ãƒ‡ãƒ¼ã‚¿
    input='{"file_path": "test.ts", "content": "// test"}'
else
    # å®Ÿéš›ã®å…¥åŠ›ãƒ‡ãƒ¼ã‚¿
    input=$(cat)
fi

# ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œ
file_path=$(echo "$input" | jq -r '.file_path')
echo "Processing: $file_path"

exit 0
```

Hook ãƒ†ã‚¹ãƒˆ:

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
TEST_MODE=true .claude/hooks/testable-hook.sh

# å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆ
echo '{"file_path": "src/app.ts"}' | .claude/hooks/testable-hook.sh
```

### 4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```bash
#!/bin/bash
# .claude/hooks/example-hook.sh

# Hook æƒ…å ±
# Name: Example Hook
# Purpose: ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å‰ã«åŸºæœ¬æ¤œè¨¼ã‚’å®Ÿè¡Œ
# Trigger: pre-file-write
# Exit Codes:
#   0 - Success (ä½œæ¥­ç¶™ç¶š)
#   1 - Error (ä½œæ¥­ä¸­æ–­)
#   2 - Warning (ä½œæ¥­ç¶™ç¶šã™ã‚‹ãŒè­¦å‘Šè¡¨ç¤º)
#
# Input JSON Schema:
# {
#   "file_path": "string",
#   "operation": "string",
#   "content": "string",
#   "metadata": {}
# }
#
# Environment Variables:
#   HOOK_DEBUG - Set to "true" for verbose output
#
# Dependencies:
#   - jq (JSON parser)
#   - bash 4.0+
#
# Author: Your Name
# Last Updated: 2025-10-29

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
DEBUG=${HOOK_DEBUG:-false}

if [ "$DEBUG" = "true" ]; then
    set -x
fi

# Hook ãƒ­ã‚¸ãƒƒã‚¯...
input=$(cat)
echo "Hook executed successfully"

exit 0
```

### 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

```bash
#!/bin/bash
# .claude/hooks/secure-hook.sh

set -euo pipefail

input=$(cat)

# 1. å…¥åŠ›æ¤œè¨¼
if ! echo "$input" | jq empty 2>/dev/null; then
    echo "Error: Invalid JSON input"
    exit 1
fi

# 2. ãƒ‘ã‚¹ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢
file_path=$(echo "$input" | jq -r '.file_path')

# çµ¶å¯¾ãƒ‘ã‚¹ã®ã¿è¨±å¯ã¾ãŸã¯ç›¸å¯¾ãƒ‘ã‚¹ã‚’å®‰å…¨ã«æ­£è¦åŒ–
if [[ "$file_path" =~ \.\. ]]; then
    echo "Error: Path traversal detected"
    exit 1
fi

# 3. æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ã‚°è¨˜éŒ²ã‚’é˜²æ­¢
# ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ãƒ­ã‚°ã«æ®‹ã•ãªã„
echo "Processing file: $(basename "$file_path")"

# 4. ç’°å¢ƒå¤‰æ•°ã®æ¤œè¨¼
if [ -n "${GITHUB_TOKEN:-}" ]; then
    echo "Warning: Sensitive env var detected, masking in logs"
fi

# 5. ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã®å®‰å…¨ãªå‡¦ç†
temp_file=$(mktemp)
trap "rm -f $temp_file" EXIT

# Hook ãƒ­ã‚¸ãƒƒã‚¯...

exit 0
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

### ä¸€èˆ¬çš„ãªå•é¡Œã¨è§£æ±ºç­–

#### 1. Hook ãŒå®Ÿè¡Œã•ã‚Œãªã„

<strong>ç—‡çŠ¶:</strong> Hook ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå…¨ãå®Ÿè¡Œã•ã‚Œãªã„

<strong>è§£æ±ºç­–:</strong>

```bash
# å®Ÿè¡Œæ¨©é™ç¢ºèª
ls -la .claude/hooks/

# å®Ÿè¡Œæ¨©é™ä»˜ä¸
chmod +x .claude/hooks/*.sh

# Hook ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèª
cat .claude/settings.json | jq '.hooks'
```

#### 2. Hook ãŒé…ã„

<strong>ç—‡çŠ¶:</strong> Hook å®Ÿè¡Œã«ã‚ˆã‚Šãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè‘—ã—ãé…ããªã‚‹

<strong>è§£æ±ºç­–:</strong>

```bash
# Hook å®Ÿè¡Œæ™‚é–“æ¸¬å®š
time echo '{"file_path": "test.ts"}' | .claude/hooks/slow-hook.sh

# ä¸¦åˆ—å®Ÿè¡Œã§æœ€é©åŒ–
# Before: é †æ¬¡å®Ÿè¡Œ (é…ã„)
check1.sh && check2.sh && check3.sh

# After: ä¸¦åˆ—å®Ÿè¡Œ (é€Ÿã„)
check1.sh & check2.sh & check3.sh & wait
```

#### 3. Hook ãƒ‡ãƒãƒƒã‚°

```bash
#!/bin/bash
# .claude/hooks/debug-hook.sh

# ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
DEBUG_LOG=".claude/logs/hook-debug.log"
mkdir -p "$(dirname "$DEBUG_LOG")"

{
    echo "=== Hook Debug Log ==="
    echo "Timestamp: $(date)"
    echo "Input:"
    cat
} | tee -a "$DEBUG_LOG"

# å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ¼ã‚¹
input=$(tail -n 1 "$DEBUG_LOG")

echo "Parsed input: $input" >> "$DEBUG_LOG"

exit 0
```

#### 4. JSON ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼

```bash
#!/bin/bash
# .claude/hooks/safe-json-parsing.sh

input=$(cat)

# jq ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
if ! command -v jq &> /dev/null; then
    echo "Error: jq is not installed"
    exit 1
fi

# JSON å¦¥å½“æ€§æ¤œè¨¼
if ! echo "$input" | jq empty 2>/dev/null; then
    echo "Error: Invalid JSON input"
    echo "Received: $input"
    exit 1
fi

# å®‰å…¨ã«å€¤æŠ½å‡º
file_path=$(echo "$input" | jq -r '.file_path // "unknown"')

exit 0
```

## å®Ÿæˆ¦ã‚·ãƒŠãƒªã‚ª: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç’°å¢ƒæ§‹ç¯‰

### å®Œå…¨ãª Hook ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    A[Claude ä½œæ¥­é–‹å§‹] --> B{Pre-file-write Hook}

    B --> C[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³]
    B --> D[å‹ãƒã‚§ãƒƒã‚¯]
    B --> E[ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°]

    C --> F{ã™ã¹ã¦ã®æ¤œæŸ»é€šé?}
    D --> F
    E --> F

    F -->|Yes| G[ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜]
    F -->|No| H[ä½œæ¥­ä¸­æ–­]

    G --> I{Post-file-write Hook}

    I --> J[ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ]
    I --> K[ç›£æŸ»ãƒ­ã‚°]
    I --> L[é€šçŸ¥é€ä¿¡]

    J --> M[å®Œäº†]
    K --> M
    L --> M
```

### çµ±åˆ Hook ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# .claude/hooks/enterprise-review.sh

set -euo pipefail

input=$(cat)
file_path=$(echo "$input" | jq -r '.file_path')

LOG_DIR=".claude/logs/$(date +%Y-%m-%d)"
mkdir -p "$LOG_DIR"

echo "ğŸš€ Enterprise Code Review Pipeline"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# ã‚¹ãƒ†ãƒƒãƒ—1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
echo "ğŸ”’ Security Scan..."
if command -v semgrep &> /dev/null; then
    semgrep --config=auto "$file_path" --json > "$LOG_DIR/security.json"
    echo "âœ… Security scan completed"
else
    echo "âš ï¸  Semgrep not installed, skipping"
fi

# ã‚¹ãƒ†ãƒƒãƒ—2: é™çš„è§£æ
echo "ğŸ“Š Static Analysis..."
if [[ "$file_path" =~ \.(ts|tsx)$ ]]; then
    npx tsc --noEmit "$file_path" 2>&1 | tee "$LOG_DIR/typecheck.log"
    echo "âœ… Type check completed"
fi

# ã‚¹ãƒ†ãƒƒãƒ—3: ã‚³ãƒ¼ãƒ‰å“è³ª
echo "âœ¨ Code Quality Check..."
if command -v sonar-scanner &> /dev/null; then
    sonar-scanner -Dsonar.sources="$file_path" > "$LOG_DIR/sonar.log"
    echo "âœ… SonarQube analysis completed"
fi

# ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
echo "ğŸ§ª Test Coverage..."
npm run test:coverage -- "$file_path" > "$LOG_DIR/coverage.log" 2>&1 || true

# ã‚¹ãƒ†ãƒƒãƒ—5: ç›£æŸ»è¿½è·¡
echo "ğŸ“ Audit Trail..."
python3 .claude/hooks/audit-trail.py <<< "$input"

# ã‚¹ãƒ†ãƒƒãƒ—6: çµæœè¦ç´„
echo ""
echo "ğŸ“‹ Review Summary"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "File: $file_path"
echo "Timestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)"
echo "Logs: $LOG_DIR/"
echo ""
echo "âœ… All checks passed"

exit 0
```

## ã¾ã¨ã‚

Claude Code Hook ã‚·ã‚¹ãƒ†ãƒ ã¯ã€AI ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«<strong>ä¸€è²«æ€§ã€å“è³ªã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</strong>ã‚’ä¿è¨¼ã™ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã®è¨˜äº‹ã§å–ã‚Šä¸Šã’ãŸå†…å®¹ã‚’è¦ç´„ã™ã‚‹ã¨:

### è¦ç‚¹

1. <strong>Hook ã¯ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªå‹•åŒ–ã®æ ¸å¿ƒ</strong>
   - ç‰¹å®šã®æ™‚ç‚¹ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒ¿å…¥
   - çµ‚äº†ã‚³ãƒ¼ãƒ‰ã§ Claude ã®å‹•ä½œã‚’åˆ¶å¾¡
   - æ§˜ã€…ãªè¨€èªã¨ãƒ„ãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆ

2. <strong>æ®µéšçš„å°å…¥ãŒé‡è¦</strong>
   - Phase 1: éç ´å£Šçš„ Hook (æƒ…å ±æä¾›)
   - Phase 2: è­¦å‘Šãƒ¬ãƒ™ãƒ« Hook (å•é¡ŒæŒ‡æ‘˜)
   - Phase 3: ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚° Hook (ä½œæ¥­ä¸­æ–­)

3. <strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è€ƒæ…®</strong>
   - ä¸¦åˆ—å®Ÿè¡Œã§é€Ÿåº¦å‘ä¸Š
   - ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã§é‡è¤‡ä½œæ¥­é˜²æ­¢
   - å…¥åŠ›æ¤œè¨¼ã¨å®‰å…¨ãªå‡¦ç†

4. <strong>å®Ÿè·µé©ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>
   - æ¡ä»¶ä»˜ãå®Ÿè¡Œã§åŠ¹ç‡æ€§å‘ä¸Š
   - CI/CD çµ±åˆã§è‡ªå‹•åŒ–æ‹¡å¼µ
   - é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã§é€æ˜æ€§ç¢ºä¿

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åŸºæœ¬ Hook ã‚’è¨­å®š
2. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦å‰‡ã®è‡ªå‹•æ¤œè¨¼å®Ÿè£…
3. CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
4. ãƒãƒ¼ãƒ å…¨ä½“ã¸ã®å±•é–‹ã¨æ”¹å–„

Hook ã‚·ã‚¹ãƒ†ãƒ ã‚’åŠ¹æœçš„ã«æ´»ç”¨ã™ã‚Œã°ã€ã‚³ãƒ¼ãƒ‰å“è³ªã¯å‘ä¸Šã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚é–“ã¯çŸ­ç¸®ã•ã‚Œã€è¦åˆ¶éµå®ˆã¯è‡ªå‹•åŒ–ã•ã‚Œã¾ã™ã€‚å°ã•ãª Hook ã‹ã‚‰å§‹ã‚ã¦ã€æ®µéšçš„ã«æ‹¡å¼µã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

## å‚è€ƒè³‡æ–™

- [Claude Code Hooks Implementation Guide](https://medium.com/@richardhightower/claude-code-hooks-implementation-guide-audit-system-03763748700f)
- [Complete Guide: Creating Claude Code Hooks](https://suiteinsider.com/complete-guide-creating-claude-code-hooks/)
- [6 Easy Ways to Level Up Claude Code](https://blog.logrocket.com/6-easy-ways-to-level-up-claude-code/)
- [Claude Code Documentation Map](https://simonwillison.net/2025/Oct/24/claude-code-docs-map/)
- [GitHub Actions with Claude Code](https://skywork.ai/blog/claude-code-plus-ci-cd-integration-setup/)
