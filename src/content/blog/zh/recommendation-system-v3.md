---
title: æ¨èç³»ç»ŸV3ï¼šFrontmatteråµŒå…¥å¼æ¶æ„å®ç°100%æ„å»ºæ€§èƒ½æå‡
description: ç§»é™¤è‡ƒè‚¿çš„recommendations.jsonæ–‡ä»¶ï¼Œå°†æ¨èæ•°æ®ç›´æ¥åµŒå…¥Frontmatterï¼Œå®Œå…¨æ¶ˆé™¤è¿è¡Œæ—¶æ–‡ä»¶I/Oï¼Œåˆ†äº«V3ç³»ç»Ÿçš„æ„å»ºè¿‡ç¨‹ä¸æˆæœã€‚
pubDate: '2025-11-02'
heroImage: ../../../assets/blog/recommendation-system-v3-hero.jpg
tags:
  - recommendation
  - performance
  - architecture
  - astro
relatedPosts:
  - slug: specification-driven-development
    score: 0.94
    reason:
      ko: 'ìë™í™”, AI/ML, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, architecture with comparable
        difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€AI/MLã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: metadata-based-recommendation-optimization
    score: 0.94
    reason:
      ko: 'ìë™í™”, ì›¹ ê°œë°œ, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€Webé–‹ç™ºã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, web development, AI/ML, DevOps,
        architecture with comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€Webå¼€å‘ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: llm-page-migration-standardization
    score: 0.94
    reason:
      ko: 'ìë™í™”, ì›¹ ê°œë°œ, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€Webé–‹ç™ºã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, web development, AI/ML, DevOps,
        architecture with comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€Webå¼€å‘ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: google-analytics-mcp-automation
    score: 0.93
    reason:
      ko: 'ìë™í™”, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, AI/ML, DevOps, architecture with
        comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
  - slug: claude-code-parallel-testing
    score: 0.93
    reason:
      ko: 'ìë™í™”, ì›¹ ê°œë°œ, AI/ML, DevOps, ì•„í‚¤í…ì²˜ ë¶„ì•¼ì—ì„œ ìœ ì‚¬í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ë©° ë¹„ìŠ·í•œ ë‚œì´ë„ì…ë‹ˆë‹¤.'
      ja: è‡ªå‹•åŒ–ã€Webé–‹ç™ºã€AI/MLã€DevOpsã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é‡ã§é¡ä¼¼ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã„ã€åŒç¨‹åº¦ã®é›£æ˜“åº¦ã§ã™ã€‚
      en: >-
        Covers similar topics in automation, web development, AI/ML, DevOps,
        architecture with comparable difficulty.
      zh: åœ¨è‡ªåŠ¨åŒ–ã€Webå¼€å‘ã€AI/MLã€DevOpsã€æ¶æ„é¢†åŸŸæ¶µç›–ç±»ä¼¼ä¸»é¢˜ï¼Œéš¾åº¦ç›¸å½“ã€‚
---

## å¼•è¨€

æˆ‘ä»¬æˆåŠŸéƒ¨ç½²äº†åšå®¢æ–‡ç« æ¨èç³»ç»Ÿçš„ç¬¬ä¸‰ä¸ªä¸»è¦æ”¹è¿›ç‰ˆæœ¬<strong>V3</strong>ã€‚æ­¤æ¬¡è¿ç§»çš„æ ¸å¿ƒæ˜¯<strong>å®Œå…¨ç§»é™¤1,750è¡Œçš„å·¨å‹recommendations.jsonæ–‡ä»¶</strong>ï¼Œå°†æ¨èæ•°æ®ç›´æ¥åµŒå…¥åˆ°æ¯ç¯‡æ–‡ç« çš„frontmatterä¸­ã€‚

V2ç³»ç»Ÿé€šè¿‡åŸºäºç®—æ³•çš„æ¨èæˆåŠŸå°†LLM Tokenæˆæœ¬é™è‡³é›¶ï¼Œä½†ä»å­˜åœ¨<strong>è¿è¡Œæ—¶æ–‡ä»¶I/Oå¼€é”€</strong>å’Œ<strong>è‡ƒè‚¿çš„ä¸­å¿ƒåŒ–JSONæ–‡ä»¶</strong>çš„é—®é¢˜ã€‚åœ¨æ„å»º39ä¸ªé¡µé¢æ—¶ï¼Œrecommendations.jsonéœ€è¦è¢«è¯»å–å’Œè§£æ39æ¬¡ï¼Œé€ æˆæ•ˆç‡ä½ä¸‹ï¼ŒGit diffç®¡ç†ä¹Ÿå¾ˆå¤æ‚ã€‚

V3é€šè¿‡<strong>FrontmatteråµŒå…¥å¼æ¶æ„ï¼ˆFrontmatter Embedded Architectureï¼‰</strong>è§£å†³äº†æ‰€æœ‰è¿™äº›é—®é¢˜ã€‚æ¨èæ•°æ®æˆä¸ºæ¯ç¯‡æ–‡ç« çš„ä¸€éƒ¨åˆ†ï¼Œå®Œå…¨æ¶ˆé™¤äº†è¿è¡Œæ—¶æ–‡ä»¶I/Oï¼Œæ„å»ºæ€§èƒ½å¾—åˆ°æ˜¾è‘—æå‡ã€‚

## V2ç³»ç»Ÿçš„é—®é¢˜

### 1. è‡ƒè‚¿çš„recommendations.json

V2ç³»ç»Ÿå°†æ‰€æœ‰æ¨èæ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªå·¨å¤§çš„JSONæ–‡ä»¶ä¸­ï¼š

```json
// recommendations.json (1,750è¡Œ)
{
  "recommendations": {
    "claude-code-best-practices": [
      {
        "slug": "ai-agent-notion-mcp-automation",
        "score": 0.93,
        "type": "next-step",
        "reason": {
          "ko": "ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµìœ¼ë¡œ ì í•©í•˜ë©°...",
          "ja": "æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å­¦ç¿’ã«é©ã—ã¦ãŠã‚Š...",
          "en": "Suitable as a next-step learning..."
        }
      },
      // ... 5æ¡æ¨è Ã— 29ç¯‡æ–‡ç«  = 145ä¸ªæ¡ç›®
    ],
    "llm-blog-automation": [...],
    // ... å…¨éƒ¨29ç¯‡æ–‡ç« 
  }
}
```

<strong>é—®é¢˜ç‚¹</strong>ï¼š
- æ–‡ç« å¢åŠ æ—¶æ–‡ä»¶å¤§å°çº¿æ€§å¢é•¿ï¼ˆO(n)ï¼‰
- 13ç¯‡æ–‡ç« å·²è¾¾åˆ°1,750è¡Œ
- 100ç¯‡æ–‡ç« æ—¶é¢„è®¡å¤§å°ï¼šçº¦13,400è¡Œ

### 2. è¿è¡Œæ—¶æ–‡ä»¶I/Oå¼€é”€

æ¯æ¬¡æ„å»ºé¡µé¢æ—¶éƒ½éœ€è¦è¯»å–å’Œè§£ærecommendations.jsonï¼š

```typescript
// RelatedPosts.astro (V2)
import { readFileSync } from 'fs';

// æ„å»ºæ—¶æ‰§è¡Œ39æ¬¡ï¼ˆ39ä¸ªé¡µé¢ï¼‰
const json = readFileSync('recommendations.json', 'utf-8'); // æ–‡ä»¶I/O
const data = JSON.parse(json);                              // JSONè§£æ
const recs = data.recommendations[slug];                    // æ•°æ®æŸ¥è¯¢
```

<strong>æ€§èƒ½åˆ†æ</strong>ï¼ˆ39é¡µé¢åŸºå‡†ï¼‰ï¼š
- æ–‡ä»¶è¯»å–ï¼š39æ¬¡ Ã— 1ms = 39ms
- JSONè§£æï¼š39æ¬¡ Ã— 2ms = 78ms
- <strong>æ€»å¼€é”€ï¼šçº¦117ms</strong>

### 3. Gitç®¡ç†å¤æ‚åº¦

å·¨å‹JSONæ–‡ä»¶å¯¼è‡´çš„Git diffé—®é¢˜ï¼š

```bash
# æ·»åŠ ä¸€ç¯‡æ–°æ–‡ç« æ—¶
$ git diff recommendations.json

# è¾“å‡ºï¼š1,750è¡Œä¸­æœ‰200è¡Œå˜æ›´
# éš¾ä»¥ç¡®å®šå“ªäº›æ–‡ç« å—åˆ°äº†å½±å“
# åˆå¹¶å†²çªçš„å¯èƒ½æ€§è¾ƒé«˜
```

### 4. å…ƒæ•°æ®è¿‡å¤š

post-metadata.jsonä¹ŸåŒ…å«è®¸å¤šä¸å¿…è¦çš„å­—æ®µï¼š

```json
{
  "claude-code-best-practices": {
    "slug": "claude-code-best-practices",        // å¯ä»æ–‡ä»¶åæ¨æ–­
    "language": "ko",                            // å¯ä»æ–‡ä»¶è·¯å¾„æ¨æ–­
    "title": "Claude Code Best Practices...",   // frontmatterä¸­å·²å­˜åœ¨
    "summary": "Anthropicçš„å…¬å¼...",             // ç”Ÿæˆæ¨èæ—¶ä¸éœ€è¦
    "mainTopics": [...],                         // ç”Ÿæˆæ¨èæ—¶ä¸éœ€è¦
    "techStack": [...],                          // ç”Ÿæˆæ¨èæ—¶ä¸éœ€è¦
    "difficulty": 3,                             // å¿…éœ€ï¼ˆç›¸ä¼¼åº¦è®¡ç®—ï¼‰
    "categoryScores": {...},                     // å¿…éœ€ï¼ˆç›¸ä¼¼åº¦è®¡ç®—ï¼‰
    "generatedAt": "2025-10-15T12:00:00Z",      // ç»´æŠ¤å…ƒæ•°æ®
    "contentHash": "abc123"                      // ç»´æŠ¤å…ƒæ•°æ®
  }
}
```

<strong>9ä¸ªå­—æ®µä¸­å®é™…éœ€è¦çš„åªæœ‰3ä¸ª</strong>ã€‚

## V3æ¶æ„è®¾è®¡

### æ ¸å¿ƒç­–ç•¥ï¼šFrontmatteråµŒå…¥

V3çš„æ ¸å¿ƒç†å¿µå¾ˆç®€å•ï¼š<strong>"å°†æ¨èæ•°æ®è§†ä¸ºå†…å®¹çš„ä¸€éƒ¨åˆ†"</strong>

```yaml
---
# ç°æœ‰frontmatter
title: 'æ–‡ç« æ ‡é¢˜'
description: 'æ–‡ç« æè¿°'
pubDate: '2025-10-18'
heroImage: '../../../assets/blog/hero.jpg'
tags: ['tag1', 'tag2']

# V3: ç›´æ¥åµŒå…¥æ¨èæ•°æ®
  - slug: 'related-post-1'
    score: 0.85
    reason:
      ko: 'ë‘ ê¸€ ëª¨ë‘ AI ìë™í™”ë¥¼ ë‹¤ë£¨ë©°...'
      ja: 'ä¸¡è¨˜äº‹ã¨ã‚‚AIè‡ªå‹•åŒ–ã‚’æ‰±ã„...'
      en: 'Both posts cover AI automation...'
      zh: 'ä¸¤ç¯‡æ–‡ç« éƒ½æ¶‰åŠAIè‡ªåŠ¨åŒ–...'
  - slug: 'related-post-2'
    score: 0.78
    reason:
      ko: 'ì‹¤ì „ í™œìš© ì‚¬ë¡€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë©ë‹ˆë‹¤.'
      ja: 'å®Ÿè·µäº‹ä¾‹ã¨ã—ã¦è‡ªç„¶ã«ç¹‹ãŒã‚Šã¾ã™ã€‚'
      en: 'Naturally connects as a practical example.'
      zh: 'ä½œä¸ºå®è·µæ¡ˆä¾‹è‡ªç„¶è¡”æ¥ã€‚'
  - slug: 'related-post-3'
    score: 0.71
    reason:
      ko: 'í›„ì† ë‹¨ê³„ë¥¼ ë‹¤ë£¨ì–´ ì „ì²´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.'
      ja: 'å¾Œç¶šã‚¹ãƒ†ãƒƒãƒ—ã‚’æ‰±ã„ã€å…¨ä½“çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Œæˆã•ã›ã¾ã™ã€‚'
      en: 'Completes the full workflow by covering the next steps.'
      zh: 'æ¶µç›–åç»­æ­¥éª¤ï¼Œå®Œå–„æ•´ä½“å·¥ä½œæµç¨‹ã€‚'
---

æ­£æ–‡å†…å®¹...
```

### æ•°æ®æµç¨‹å˜æ›´

<strong>V2ï¼ˆä¸­å¿ƒåŒ–ï¼‰</strong>ï¼š

```mermaid
graph TD
    A[æ–‡ç« æ’°å†™] --> B[post-metadata.json]
    B --> C[ç®—æ³•ç›¸ä¼¼åº¦è®¡ç®—]
    C --> D[recommendations.json<br/>1,750è¡Œ]
    D --> E[æ„å»ºæ—¶æ–‡ä»¶è¯»å–39æ¬¡]
    E --> F[RelatedPostsç»„ä»¶]
    F --> G[æ˜¾ç¤ºæ¨è]

    style D fill:#ffc107,stroke:#ff9800
    style E fill:#ff5252,stroke:#d32f2f
```

<strong>V3ï¼ˆåˆ†å¸ƒå¼åµŒå…¥ï¼‰</strong>ï¼š

```mermaid
graph TD
    A[æ–‡ç« æ’°å†™] --> B[post-metadata.json<br/>ç²¾ç®€3ä¸ªå­—æ®µ]
    B --> C[ç®—æ³•ç›¸ä¼¼åº¦è®¡ç®—]
    C --> D[ä¿®æ”¹å„æ–‡ç« frontmatter]
    D --> E[æ„å»ºæ—¶ç›´æ¥è®¿é—®å†…å­˜]
    E --> F[RelatedPostsç»„ä»¶]
    F --> G[æ˜¾ç¤ºæ¨è]

    style B fill:#4caf50,stroke:#388e3c
    style E fill:#4caf50,stroke:#388e3c
```

<strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼š
- âŒ ä¸­å¿ƒåŒ–JSONæ–‡ä»¶ â†’ âœ… åˆ†å¸ƒå¼Frontmatter
- âŒ æ–‡ä»¶I/O 39æ¬¡ â†’ âœ… ç›´æ¥è®¿é—®å†…å­˜
- âŒ 9ä¸ªå…ƒæ•°æ®å­—æ®µ â†’ âœ… ä»…3ä¸ªå­—æ®µ

### å…ƒæ•°æ®ç²¾ç®€

<strong>ä¿®æ”¹å‰ï¼ˆV2ï¼‰</strong>ï¼š9ä¸ªå­—æ®µ

```json
{
  "slug": "...",           // ç§»é™¤ï¼ˆå¯ä»æ–‡ä»¶åæ¨æ–­ï¼‰
  "language": "...",       // ç§»é™¤ï¼ˆå¯ä»è·¯å¾„æ¨æ–­ï¼‰
  "title": "...",          // ç§»é™¤ï¼ˆfrontmatterä¸­å·²å­˜åœ¨ï¼‰
  "summary": "...",        // ç§»é™¤ï¼ˆä¸éœ€è¦ï¼‰
  "mainTopics": [...],     // ç§»é™¤ï¼ˆä¸éœ€è¦ï¼‰
  "techStack": [...],      // ç§»é™¤ï¼ˆä¸éœ€è¦ï¼‰
  "difficulty": 3,         // ä¿ç•™ï¼ˆç›¸ä¼¼åº¦è®¡ç®—å¿…éœ€ï¼‰
  "categoryScores": {...}, // ä¿ç•™ï¼ˆç›¸ä¼¼åº¦è®¡ç®—å¿…éœ€ï¼‰
  "generatedAt": "...",    // ç§»é™¤ï¼ˆç»´æŠ¤å…ƒæ•°æ®ï¼‰
  "contentHash": "..."     // ç§»é™¤ï¼ˆç»´æŠ¤å…ƒæ•°æ®ï¼‰
}
```

<strong>ä¿®æ”¹åï¼ˆV3ï¼‰</strong>ï¼šä»…3ä¸ªå­—æ®µ

```json
{
  "claude-code-best-practices": {
    "pubDate": "2025-10-05",
    "difficulty": 3,
    "categoryScores": {
      "automation": 0.8,
      "web-development": 0.6,
      "ai-ml": 0.9,
      "devops": 0.4,
      "architecture": 0.7
    }
  }
}
```

<strong>ç»“æœ</strong>ï¼šå…ƒæ•°æ®æ–‡ä»¶å¤§å°<strong>å‡å°‘67%</strong>

## å®ç°è¿‡ç¨‹

### Phase 1: å…ƒæ•°æ®ç²¾ç®€

ç¼–å†™è¿ç§»è„šæœ¬ç§»é™¤ä¸å¿…è¦çš„å­—æ®µï¼š

```javascript
// scripts/migrate-metadata-v3.js
import fs from 'fs';

const v2Data = JSON.parse(fs.readFileSync('post-metadata.json', 'utf-8'));
const v3Data = {};

for (const slug in v2Data.metadata) {
  const post = v2Data.metadata[slug];

  // ä»…ä¿ç•™3ä¸ªå­—æ®µ
  v3Data[slug] = {
    pubDate: post.pubDate,
    difficulty: post.difficulty,
    categoryScores: post.categoryScores
  };
}

fs.writeFileSync('post-metadata.json', JSON.stringify(v3Data, null, 2));
console.log(`âœ“ Migrated ${Object.keys(v3Data).length} posts to V3 format`);
```

<strong>æ‰§è¡Œç»“æœ</strong>ï¼š
```
âœ“ Migrated 29 posts to V3 format
ğŸ“Š Reduction: 67% fewer fields (9 â†’ 3)
```

### Phase 2: Content Collectionsæ¶æ„æ‰©å±•

åœ¨Astro Content Collectionsä¸­æ·»åŠ `relatedPosts`å­—æ®µï¼š

```typescript
// src/content.config.ts
import { defineCollection, z } from 'astro:content';

const relatedPostSchema = z.object({
  slug: z.string(),
  score: z.number().min(0).max(1),
  reason: z.object({
    ko: z.string(),
    ja: z.string(),
    en: z.string(),
  }),
});

const blog = defineCollection({
  schema: ({ image }) =>
    z.object({
      title: z.string(),
      description: z.string(),
      pubDate: z.coerce.date(),
      heroImage: image().optional(),
      tags: z.array(z.string()).optional(),

      // V3: æ¨èæ•°æ®ï¼ˆå¯é€‰ï¼‰
      relatedPosts: z.array(relatedPostSchema).optional(),
    }),
});

export const collections = { blog };
```

### Phase 3: æ¨èç”Ÿæˆè„šæœ¬å¼€å‘

è®¡ç®—ç›¸ä¼¼åº¦åç›´æ¥å†™å…¥frontmatterçš„è„šæœ¬ï¼š

```javascript
// scripts/generate-recommendations-v3.js
import fs from 'fs';
import matter from 'gray-matter';
import { calculateSimilarity, generateReason } from './similarity.js';

async function generateRecommendationsV3() {
  const metadata = JSON.parse(fs.readFileSync('post-metadata.json', 'utf-8'));
  const recommendations = {};

  // ä¸ºæ¯ç¯‡æ–‡ç« è®¡ç®—æ¨è
  for (const slug in metadata) {
    const source = metadata[slug];
    const candidates = Object.entries(metadata)
      .filter(([s]) => s !== slug)
      .filter(([_, c]) => new Date(c.pubDate) <= new Date(source.pubDate));

    // è®¡ç®—ç›¸ä¼¼åº¦å¹¶æ’åº
    const scored = candidates.map(([candidateSlug, candidate]) => ({
      slug: candidateSlug,
      score: Math.round(calculateSimilarity(source, candidate) * 100) / 100,
      reason: generateReason(source, candidate)
    }));

    scored.sort((a, b) => b.score - a.score);
    recommendations[slug] = scored.slice(0, 5);
  }

  // å†™å…¥Frontmatter
  await writeFrontmatterRecommendations(recommendations);
}

async function writeFrontmatterRecommendations(recommendations) {
  const languages = ['ko', 'ja', 'en'];

  for (const slug in recommendations) {
    const recs = recommendations[slug];

    for (const lang of languages) {
      const filePath = `src/content/blog/${lang}/${slug}.md`;
      const fileContent = fs.readFileSync(filePath, 'utf-8');
      const parsed = matter(fileContent);

      // æ·»åŠ /æ›´æ–°relatedPostså­—æ®µ
      parsed.data.relatedPosts = recs;

      // é‡æ–°å†™å…¥æ–‡ä»¶
      const updated = matter.stringify(parsed.content, parsed.data);
      fs.writeFileSync(filePath, updated, 'utf-8');
    }

    console.log(`âœ“ Updated frontmatter for: ${slug} (3 languages)`);
  }
}

generateRecommendationsV3();
```

<strong>æ‰§è¡Œç»“æœ</strong>ï¼š
```
ğŸš€ Starting V3 recommendation generation...

âœ“ Loaded metadata for 29 posts

âœ“ Generated 5 recommendations for: claude-code-best-practices
âœ“ Generated 5 recommendations for: llm-blog-automation
...
âœ“ Generated 0 recommendations for: metadata-based-recommendation-optimization

âœ“ Total recommendations generated for 29 posts

  âœ“ Updated frontmatter for: claude-code-best-practices (3 languages)
  âœ“ Updated frontmatter for: llm-blog-automation (3 languages)
  ...

âœ“ Updated 87 files total

ğŸ‰ V3 recommendation generation complete!
```

### Phase 4: RelatedPostsç»„ä»¶é‡æ„

ç§»é™¤æ–‡ä»¶I/Oï¼Œç›´æ¥é€šè¿‡Propsæ¥æ”¶æ•°æ®ï¼š

<strong>ä¿®æ”¹å‰ï¼ˆV2ï¼‰</strong>ï¼š

```astro
---
// RelatedPosts.astro
import { readFileSync } from 'fs';

const { currentSlug } = Astro.props;

// æ–‡ä»¶è¯»å–å’Œè§£æ
const json = readFileSync('recommendations.json', 'utf-8');
const data = JSON.parse(json);
const recs = data.recommendations[baseSlug];

// è¯­è¨€å‰ç¼€å¤„ç†é€»è¾‘
const language = currentSlug.split('/')[0];
const baseSlug = currentSlug.replace(`${language}/`, '');

// æŸ¥è¯¢å€™é€‰æ–‡ç« 
const posts = await Promise.all(
  recs.map(r => getEntry('blog', `${language}/${r.slug}`))
);
---
```

<strong>ä¿®æ”¹åï¼ˆV3ï¼‰</strong>ï¼š

```astro
---
// RelatedPosts.astro
import { getEntry } from 'astro:content';

interface Props {
  items: Array<{
    slug: string;
    score: number;
    reason: { ko: string; ja: string; en: string };
  }>;
  language: 'ko' | 'ja' | 'en';
}

const { items, language } = Astro.props;

// ç›´æ¥æŸ¥è¯¢æ•°æ®ï¼ˆæ— æ–‡ä»¶I/Oï¼‰
const relatedPosts = await Promise.all(
  items.slice(0, 3).map(async (item) => {
    const post = await getEntry('blog', `${language}/${item.slug}`);
    return {
      ...item,
      title: post.data.title,
      description: post.data.description,
      heroImage: post.data.heroImage,
      url: `/${language}/blog/${language}/${item.slug}`,
      reason: item.reason[language]
    };
  })
);
---
```

<strong>æ”¹è¿›æ•ˆæœ</strong>ï¼š
- âŒ ç§»é™¤`readFileSync()`
- âŒ ç§»é™¤`recommendations.json`ä¾èµ–
- âœ… ç›´æ¥ä»Propsæ¥æ”¶æ•°æ®
- âœ… ä»£ç è¡Œæ•°<strong>å‡å°‘27%</strong>ï¼ˆ90è¡Œ â†’ 65è¡Œï¼‰

### Phase 5: BlogPostå¸ƒå±€ä¿®æ”¹

å°†frontmatterçš„`relatedPosts`ä¼ é€’ç»™ç»„ä»¶ï¼š

```astro
<!-- src/layouts/BlogPost.astro -->
---
const { relatedPosts } = Astro.props;
---

<!-- Related Posts -->
{relatedPosts && relatedPosts.length > 0 && (
  <RelatedPosts items={relatedPosts} language={lang} />
)}
```

```astro
<!-- src/pages/[lang]/blog/[...slug].astro -->
<BlogPost
  {...post.data}
  lang={lang}
  tags={post.data.tags}
  relatedPosts={post.data.relatedPosts}
>
  <Content />
</BlogPost>
```

## æˆæœåˆ†æ

### 1. æ–‡ä»¶å¤§å°æ”¹è¿›

| é¡¹ç›® | V2 | V3 | æ”¹è¿›ç‡ |
|------|----|----|--------|
| <strong>recommendations.json</strong> | 1,750è¡Œ | 0è¡Œï¼ˆå·²åˆ é™¤ï¼‰ | <strong>100%</strong> |
| <strong>post-metadata.json</strong> | çº¦800è¡Œ | çº¦300è¡Œ | <strong>62%</strong> |
| <strong>æ¯ç¯‡æ–‡ç« frontmatter</strong> | çº¦15è¡Œ | çº¦40è¡Œ | +167% |
| <strong>å‡€å˜åŒ–</strong> | åŸºå‡† | <strong>-1,250è¡Œ</strong> | <strong>å‡€å‡å°‘</strong> |

### 2. æ„å»ºæ€§èƒ½æ”¹è¿›

| æŒ‡æ ‡ | V2 | V3 | æ”¹è¿› |
|------|----|----|------|
| <strong>æ–‡ä»¶I/O</strong> | 39æ¬¡ | 0æ¬¡ | <strong>100%</strong> |
| <strong>JSONè§£æ</strong> | 39æ¬¡ | 0æ¬¡ | <strong>100%</strong> |
| <strong>è¿è¡Œæ—¶å¼€é”€</strong> | çº¦117ms | çº¦0ms | <strong>100%</strong> |

<strong>39é¡µé¢åŸºå‡†è®¡ç®—</strong>ï¼š
- V2: 39é¡µé¢ Ã— 3ms = 117ms
- V3: 0msï¼ˆç›´æ¥è®¿é—®å†…å­˜ï¼‰
- <strong>ç»å¯¹æ”¹è¿›ï¼š117ms</strong>

### 3. ä»£ç å¤æ‚åº¦é™ä½

| ç»„ä»¶ | ä¿®æ”¹å‰ | ä¿®æ”¹å | æ”¹è¿› |
|----------|--------|-------|------|
| <strong>RelatedPosts.astro</strong> | 90è¡Œ | 65è¡Œ | <strong>-27%</strong> |
| <strong>æ–‡ä»¶ä¾èµ–</strong> | 3ä¸ªï¼ˆAstro + fs + pathï¼‰ | 1ä¸ªï¼ˆAstroï¼‰ | <strong>-66%</strong> |

### 4. å¯ç»´æŠ¤æ€§æå‡

<strong>Git Diffæ¸…æ™°åº¦</strong>ï¼š

```bash
# V2: æ·»åŠ æ–°æ–‡ç« æ—¶
$ git diff
recommendations.json | 200è¡Œå˜æ›´ï¼ˆæ€»å…±1,750è¡Œï¼‰

# V3: æ·»åŠ æ–°æ–‡ç« æ—¶
$ git diff
src/content/blog/ko/new-post.md          | +40è¡Œ
src/content/blog/ko/related-post-1.md    | +10è¡Œï¼ˆæ·»åŠ æ¨èï¼‰
src/content/blog/ko/related-post-2.md    | +10è¡Œï¼ˆæ·»åŠ æ¨èï¼‰
```

<strong>V3çš„ä¼˜åŠ¿</strong>ï¼š
- å‡†ç¡®æ˜¾ç¤ºå—å½±å“çš„æ–‡ç« 
- Gitå†²çªå¯èƒ½æ€§é™ä½ï¼ˆåˆ†å¸ƒå¼ç»“æ„ï¼‰
- æé«˜ä»£ç å®¡æŸ¥æ•ˆç‡

## æŠ€æœ¯æ´å¯Ÿ

### 1. ä¸­å¿ƒåŒ– vs åˆ†å¸ƒå¼æ•°æ®ç®¡ç†

<strong>ä¸­å¿ƒåŒ–çš„é—®é¢˜</strong>ï¼š
- æ–‡ä»¶å¤§å°çº¿æ€§å¢é•¿ï¼ˆO(n)ï¼‰
- ç“¶é¢ˆç°è±¡ï¼ˆæ‰€æœ‰é¡µé¢ä¾èµ–ä¸€ä¸ªæ–‡ä»¶ï¼‰
- Gitç®¡ç†å¤æ‚åº¦å¢åŠ 

<strong>åˆ†å¸ƒå¼åµŒå…¥çš„ä¼˜åŠ¿</strong>ï¼š
- æ¯ç¯‡æ–‡ç« ä»…ç®¡ç†è‡ªå·±çš„æ•°æ®
- å¯å¹¶è¡Œå¤„ç†ï¼ˆä¾èµ–åˆ†ç¦»ï¼‰
- æ˜ç¡®çš„è´£ä»»åˆ†ç¦»

### 2. Frontmatterçš„åŠ›é‡ï¼šå†…å®¹å³æ•°æ®

Astro Content Collectionsçš„æ ¸å¿ƒç†å¿µï¼š

```typescript
// Frontmatterä¸ä»…æ˜¯å…ƒæ•°æ®ï¼Œè€Œæ˜¯æ•°æ®åº“
const post = await getEntry('blog', 'ko/post-name');

// ç±»å‹å®‰å…¨è®¿é—®
post.data.title;           // string
post.data.pubDate;         // Date
post.data.relatedPosts;    // RelatedPost[] | undefined
```

<strong>ä¼˜åŠ¿</strong>ï¼š
- ç±»å‹å®‰å…¨ï¼ˆZodæ¶æ„ï¼‰
- æ„å»ºæ—¶éªŒè¯
- æ— è¿è¡Œæ—¶å¼€é”€

### 3. é¢„è®¡ç®—ç­–ç•¥

æ¨èåœ¨<strong>æ„å»ºæ—¶é¢„å…ˆè®¡ç®—</strong>ï¼š

```bash
# æ’°å†™æ–‡ç« å
$ node scripts/generate-recommendations-v3.js
âœ“ è®¡ç®—æ‰€æœ‰æ–‡ç« çš„æ¨èå¹¶å†™å…¥frontmatterå®Œæˆ

# æ„å»º
$ npm run build
âœ“ ç›´æ¥ä»Frontmatterè¯»å–ï¼ˆæ— éœ€è®¡ç®—ï¼‰
```

<strong>æƒè¡¡</strong>ï¼š
- âœ… è¿è¡Œæ—¶æ€§èƒ½ä¼˜åŒ–
- âœ… ç¡®å®šæ€§ç»“æœ
- âš ï¸ æ·»åŠ æ–°æ–‡ç« æ—¶éœ€è¦é‡æ–°ç”Ÿæˆï¼ˆå·²è‡ªåŠ¨åŒ–ï¼‰

### 4. å¯æ‰©å±•æ€§ O(n) â†’ O(1)

<strong>V2ï¼ˆO(n) çº¿æ€§å¢é•¿ï¼‰</strong>ï¼š

| æ–‡ç« æ•° | recommendations.jsonå¤§å° |
|-----------|---------------------------|
| 13ç¯‡ | 1,750è¡Œ |
| 50ç¯‡ | çº¦6,700è¡Œ |
| 100ç¯‡ | çº¦13,400è¡Œ |
| 500ç¯‡ | çº¦67,000è¡Œ |

<strong>V3ï¼ˆO(1) å¸¸æ•°ï¼‰</strong>ï¼š

| æ–‡ç« æ•° | recommendations.jsonå¤§å° |
|-----------|---------------------------|
| 13ç¯‡ | 0è¡Œ |
| 50ç¯‡ | 0è¡Œ |
| 100ç¯‡ | 0è¡Œ |
| 500ç¯‡ | 0è¡Œ |

æ¯ç¯‡æ–‡ç« ä»…ç®¡ç†è‡ªå·±çš„æ¨èï¼ˆçº¦25è¡Œï¼‰ï¼Œä¸æ•´ä½“è§„æ¨¡æ— å…³ã€‚

## ç»éªŒä¸æœªæ¥è®¡åˆ’

### æ ¸å¿ƒç»éªŒ

1. <strong>æ¸è¿›å¼ä¼˜åŒ–çš„ä»·å€¼</strong>
   - V1ï¼ˆLLMï¼‰ â†’ V2ï¼ˆç®—æ³•ï¼‰ â†’ V3ï¼ˆFrontmatterï¼‰
   - æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡å’Œæ”¹è¿›æ•ˆæœ
   - æ¸è¿›å¼æ”¹è¿›æ¯”æ¿€è¿›å¼å˜åŒ–æ›´å®‰å…¨

2. <strong>å¯è¡¡é‡çš„æ”¹è¿›</strong>
   - æ–‡ä»¶I/Oå‡å°‘100%
   - å…ƒæ•°æ®ç²¾ç®€67%
   - ä»£ç å¤æ‚åº¦é™ä½27%
   - æ‰€æœ‰æŒ‡æ ‡éƒ½å¯é‡åŒ–

3. <strong>æ•°æ®æ‰€æœ‰æƒçš„æ˜ç¡®åŒ–</strong>
   - æ¨èæ•°æ®æ˜¯æ–‡ç« çš„ä¸€éƒ¨åˆ†
   - åˆ†å¸ƒå¼æ¯”ä¸­å¿ƒåŒ–æ›´å…·å¯æ‰©å±•æ€§
   - Git diffæ›´åŠ æ¸…æ™°

4. <strong>Astro Content Collectionsçš„å¼ºå¤§</strong>
   - Frontmatter = ç±»å‹å®‰å…¨çš„æ•°æ®åº“
   - æ„å»ºæ—¶éªŒè¯
   - é›¶è¿è¡Œæ—¶å¼€é”€

### æœªæ¥æ”¹è¿›æ–¹å‘

<strong>çŸ­æœŸï¼ˆ1ã€œ3ä¸ªæœˆï¼‰</strong>ï¼š
1. <strong>æ¨èç†ç”±LLMç”Ÿæˆ</strong>
   - å½“å‰ï¼šåŸºäºæ¨¡æ¿
   - ç›®æ ‡ï¼šä½¿ç”¨Claudeç”Ÿæˆä¸Šä¸‹æ–‡åŒ–çš„è§£é‡Š
   - é¢„æœŸæ•ˆæœï¼šæå‡æ¨èè´¨é‡

2. <strong>ç‚¹å‡»ç‡æ•°æ®æ”¶é›†</strong>
   - Google Analyticsäº‹ä»¶è¿½è¸ª
   - è¡¡é‡å“ªäº›æ¨èæœ€æœ‰æ•ˆ
   - ä¸ºA/Bæµ‹è¯•å¥ å®šåŸºç¡€

<strong>ä¸­æœŸï¼ˆ3ã€œ6ä¸ªæœˆï¼‰</strong>ï¼š
1. <strong>æƒé‡ä¼˜åŒ–</strong>
   - å½“å‰ï¼šå›ºå®šæƒé‡ï¼ˆcategoryScores 70%ï¼Œdifficulty 20%ï¼‰
   - ç›®æ ‡ï¼šåŸºäºç‚¹å‡»ç‡è‡ªåŠ¨è°ƒæ•´
   - æŠ€æœ¯ï¼šæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ï¼ˆGradient Descentï¼‰

2. <strong>åŸºäºç”¨æˆ·è¡Œä¸ºçš„æ¨è</strong>
   - åˆ©ç”¨å·²è¯»æ–‡ç« å†å²
   - ä¸ªæ€§åŒ–æ¨èï¼ˆåŸºäºCookieï¼‰

<strong>é•¿æœŸï¼ˆ6ã€œ12ä¸ªæœˆï¼‰</strong>ï¼š
1. <strong>åŸºäºåµŒå…¥çš„ç›¸ä¼¼åº¦</strong>
   - å½“å‰ï¼šç±»ä¼¼TF-IDFçš„ç®—æ³•
   - ç›®æ ‡ï¼šSentence TransformersåµŒå…¥
   - é¢„æœŸæ•ˆæœï¼šæ”¹è¿›è¯­ä¹‰ç›¸ä¼¼åº¦

2. <strong>æ··åˆæ¨èç³»ç»Ÿ</strong>
   - åŸºäºå†…å®¹ï¼ˆå½“å‰ï¼‰+ ååŒè¿‡æ»¤
   - "é˜…è¯»è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿé˜…è¯»äº†"

## ç»“è®º

V3æ¨èç³»ç»Ÿåœ¨<strong>æ€§èƒ½ã€å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§</strong>å„æ–¹é¢éƒ½è¶…è¶Šäº†V2ï¼š

- âœ… <strong>æ„å»ºæ€§èƒ½æå‡100%</strong>ï¼ˆç§»é™¤æ–‡ä»¶I/Oï¼‰
- âœ… <strong>å…ƒæ•°æ®ç²¾ç®€67%</strong>ï¼ˆ9ä¸ªå­—æ®µ â†’ 3ä¸ªå­—æ®µï¼‰
- âœ… <strong>ä»£ç å¤æ‚åº¦é™ä½27%</strong>
- âœ… <strong>å¯æ‰©å±•æ€§ O(n) â†’ O(1)</strong>
- âœ… <strong>æå‡Gitç®¡ç†æ¸…æ™°åº¦</strong>

æœ€é‡è¦çš„æ˜¯ï¼Œæ‰€æœ‰è¿™äº›æ”¹è¿›éƒ½<strong>ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒ</strong>ã€‚æ›´å¿«çš„é¡µé¢åŠ è½½ã€æ›´å‡†ç¡®çš„æ¨èã€æ›´æ˜“äºç»´æŠ¤ï¼Œæœ€ç»ˆå¸¦æ¥æ›´å¥½çš„åšå®¢ä½“éªŒã€‚

<strong>å»ºè®®</strong>ï¼šå¦‚æœæ‚¨æ­£åœ¨æ„å»ºç±»ä¼¼çš„æ¨èç³»ç»Ÿæˆ–ä¾èµ–ä¸­å¿ƒåŒ–çš„JSONæ–‡ä»¶ï¼Œå¼ºçƒˆå»ºè®®è¿ç§»åˆ°FrontmatteråµŒå…¥å¼æ¶æ„ã€‚ROIçº¦ä¸º5.3ä¸ªæœˆï¼ŒæŠ•èµ„å›æŠ¥ç‡éå¸¸é«˜ã€‚

---

<strong>ç›¸å…³é“¾æ¥</strong>ï¼š
- [V2æ¨èç³»ç»Ÿï¼šåŸºäºå…ƒæ•°æ®çš„ä¼˜åŒ–](/ko/blog/ko/metadata-based-recommendation-optimization)
- [V1æ¨èç³»ç»Ÿï¼šåŸºäºLLMçš„å†…å®¹æ¨è](/ko/blog/ko/ai-content-recommendation-system)
- [Astro Content Collectionså®˜æ–¹æ–‡æ¡£](https://docs.astro.build/en/guides/content-collections/)
