# ページテストコマンド

ウェブページの品質を自動で検証します。

## 使用方法

```bash
/test-page <url> [options]
```

## オプション

- `--browsers <browsers>`: テストするブラウザ（デフォルト: chromium,firefox,webkit）
- `--mobile-only`: モバイルテストのみ実行
- `--skip-a11y`: アクセシビリティテストをスキップ
- `--skip-seo`: SEOテストをスキップ
- `--verbose`: 詳細ログを出力

## 使用例

```bash
# 基本テスト
/test-page https://example.com

# 現在の開発サーバーをテスト
/test-page http://localhost:4321/blog/my-post

# Chromiumのみテスト
/test-page https://example.com --browsers chromium

# モバイルのみテスト
/test-page https://example.com --mobile-only
```

## 実装

このコマンドは `page-tester` エージェントを呼び出してテストを実行します。

## 検証項目

以下の品質項目を自動検証します:

1. **クロスブラウザ互換性** (P0)
   - Chromium, Firefox, WebKit で同時テスト
   - ブラウザ別レンダリング差異の自動検出
   - スクリーンショット比較による視覚的回帰テスト

2. **リンク整合性** (P0)
   - ページ内の全リンクをクロール
   - 壊れたリンク（404, 500等）を自動検知
   - 外部リンクのアクセス性確認

3. **アクセシビリティ (a11y)** (P0)
   - WCAG 2.1 AA レベル準拠確認
   - キーボードナビゲーションテスト
   - スクリーンリーダー互換性
   - 色コントラスト比検証

4. **モバイルレスポンシブ** (P0)
   - レイアウトブレイクポイントテスト
   - タッチターゲットサイズ確認（最小44x44px）
   - 横スクロールの有無確認

5. **画像最適化** (P1)
   - レンダリングサイズ vs ナチュラルサイズ比較
   - 過度に大きい画像を自動検知
   - WebP/AVIF フォーマット使用推奨
   - 画像遅延ロードの確認
   - Alt テキスト漏れチェック

6. **SEO検証** (P1)
   - メタタグ完成度チェック
   - Open Graph データ検証
   - 構造化データ（Schema.org）確認
   - Core Web Vitals 検証

7. **UI/UX検証** (P1)
   - フォントサイズの可読性検証
   - インタラクション要素の動作確認

8. **コンテンツ品質** (P2)
   - テキストの可読性分析
   - メタデータ完成度チェック

## 出力形式

テスト結果は以下の形式で出力されます:

1. **コンソール出力**: テスト実行中のリアルタイム進捗
2. **日本語レポートファイル**: `working_history/reports/page-test-YYYYMMDD-HHMMSS.md` に詳細レポートを自動生成

## 実行

`page-tester` エージェントを起動し、指定されたURLとオプションでテストを実行してください。

**重要**:
- テスト完了後、必ず日本語でマークダウン形式のレポートファイルを生成すること
- **Write ツールで絶対パスを使用**:
  1. `pwd` でプロジェクトルートの絶対パスを取得
  2. `.page-test.config.js` の `outputDir` を確認（デフォルト: `./working_history/reports`）
  3. 絶対パスを構築: `{pwd}/{outputDir}/page-test-YYYYMMDD-HHMMSS.md`
  4. ディレクトリが存在しない場合は `mkdir -p` で作成
- ファイル名は `page-test-YYYYMMDD-HHMMSS.md` 形式（例: `page-test-20251121-143022.md`）
- レポートには以下の内容を含めること:
  - テスト対象URL、実行日時
  - 総合評価（合格/条件付き合格/不合格）
  - カテゴリー別テスト結果（優先度別に整理）
  - 具体的な問題点と修正方法（コード例付き）
  - 統計サマリー
  - 改善提案リスト
