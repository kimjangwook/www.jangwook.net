# 에이전트 및 커맨드 수정 작업 계획

## 작업 개요
블로그 포스트 작성 시 이미지 자동 생성 기능을 추가하고, 다국어 지원을 강화하며, 블로그 포스트 작성 커맨드를 구현합니다.

## 작업 목표
1. Gemini API를 활용한 이미지 생성 에이전트 추가
2. Writing Assistant 에이전트의 다국어 지원 및 이미지 생성 통합
3. 블로그 포스트 작성 자동화 커맨드 구현

## 세부 작업 계획

### 1. 이미지 생성 에이전트 추가
**파일**: `.claude/agents/image-generator.md`

**기능**:
- Gemini 2.5 Flash Image API를 사용한 이미지 생성
- Writing Assistant로부터 이미지 프롬프트 수신
- 생성된 이미지를 프로젝트 assets 폴더에 저장
- 이미지 경로 반환

**API 설정**:
- API 엔드포인트: `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent`
- 인증: `.env` 파일의 `GEMINI_API_KEY` 사용
- 출력 형식: Base64 디코딩 후 PNG 파일로 저장

**저장 경로**: `src/assets/blog/[생성일자]-[제목slug].png`

### 2. Writing Assistant 에이전트 수정
**파일**: `.claude/agents/writing-assistant.md`

**추가 기능**:
- 이미지 생성 에이전트와 협업 워크플로우
- 블로그 포스트 작성 시 자동 이미지 프롬프트 생성
- 다국어 콘텐츠 생성 (한국어, 일본어, 영어)
- 다국어 파일 구조:
  - `src/pages/[lang]/blog/[slug].astro` 형식
  - 각 언어별 별도 파일 생성

**이미지 생성 워크플로우**:
1. 블로그 포스트 주제 분석
2. 적절한 히어로 이미지 프롬프트 생성
3. 이미지 생성 에이전트 호출
4. 반환된 이미지 경로를 Frontmatter에 추가

### 3. 블로그 포스트 작성 커맨드 생성
**파일**: `.claude/commands/write-post.md`

**커맨드 이름**: `/write-post`

**기능**:
- 사용자 입력(주제, 키워드 등)을 받아 블로그 포스트 자동 생성
- Writing Assistant 에이전트 호출
- 이미지 생성 에이전트 자동 통합
- 다국어 버전 동시 생성 옵션

**사용 예시**:
```
/write-post "Next.js 15의 새로운 기능" --tags nextjs,react --languages ko,ja,en
```

## 기술 스택
- **이미지 생성**: Gemini 2.5 Flash Image API
- **HTTP 요청**: curl (bash)
- **이미지 처리**: base64 디코딩
- **파일 관리**: Astro assets 시스템

## 진행 상황

### ✅ 완료
- [x] 작업 계획 문서 작성
- [x] 이미지 생성 에이전트 파일 생성
- [x] Writing Assistant 에이전트 수정
- [x] 블로그 포스트 작성 커맨드 생성

## 구현 결과

### 1. 이미지 생성 에이전트 (image-generator.md)
**생성 위치**: `.claude/agents/image-generator.md`

**구현된 주요 기능**:
- Gemini 2.5 Flash Image API 통합
- Bash 스크립트를 통한 API 호출 및 이미지 생성
- Base64 디코딩 및 PNG 파일 저장
- Writing Assistant와의 협업 워크플로우 정의
- 파일명 규칙: `YYYY-MM-DD-[제목slug].png`
- 저장 경로: `src/assets/blog/`

**포함된 문서 섹션**:
- 설명 및 주요 기능
- API 설정 방법 (환경변수, API 키 발급)
- 이미지 저장 규칙
- Writing Assistant 협업 워크플로우 (4단계)
- 실용적인 가이드 (프롬프트 작성, 에러 핸들링, 품질 가이드라인)

### 2. Writing Assistant 에이전트 수정
**수정 파일**: `.claude/agents/writing-assistant.md`

**추가된 주요 기능**:
1. **이미지 생성 통합**:
   - 자동 히어로 이미지 프롬프트 생성
   - Image Generator 에이전트 호출 방법
   - Frontmatter에 이미지 경로 자동 추가
   - 4단계 협업 워크플로우

2. **다국어 지원 강화**:
   - 한국어, 일본어, 영어 동시 생성
   - 프로젝트 구조에 맞는 파일 경로 (`src/pages/[lang]/blog/`)
   - 언어별 SEO 메타데이터 최적화
   - 다국어 버전 간 상호 링크 자동 추가

3. **Frontmatter 필드 추가**:
   - `heroImage`: 이미지 경로
   - `lang`: 언어 코드 (ko, ja, en)
   - `alternates`: 다국어 버전 링크

4. **다국어 SEO 최적화**:
   - 언어별 메타데이터 작성 가이드
   - 기술 용어 일관성 가이드 (한국어, 일본어, 영어)
   - 상호 링크 구현 방법

### 3. 블로그 포스트 작성 커맨드
**생성 위치**: `.claude/commands/write-post.md`

**커맨드 사양**:
- **이름**: `/write-post`
- **필수 파라미터**: `topic` (블로그 포스트 주제)
- **선택 파라미터**:
  - `--tags`: 태그 목록 (쉼표 구분)
  - `--languages`: 언어 목록 (기본값: ko,ja,en)
  - `--description`: SEO 설명

**구현된 워크플로우**:
1. 사용자 입력 파싱 및 검증
2. Writing Assistant 에이전트에게 작업 위임
3. 히어로 이미지 자동 생성 (Image Generator 통합)
4. 다국어 콘텐츠 동시 생성
5. 파일 저장 및 검증
6. 결과 출력 (생성된 파일 경로, 이미지 경로 등)

**사용 예시**:
```bash
/write-post "Next.js 15의 새로운 기능" --tags nextjs,react --languages ko,ja,en
/write-post "React 커스텀 훅 가이드" --tags react,hooks --languages ko,ja
```

## 주요 개선 사항

1. **자동화 워크플로우**:
   - 블로그 포스트 작성 시 이미지 자동 생성
   - 다국어 버전 동시 생성으로 작업 효율성 향상
   - 에이전트 간 협업 체계 확립

2. **다국어 지원**:
   - 한국어, 일본어, 영어 3개 언어 지원
   - 프로젝트의 실제 디렉토리 구조 반영
   - 언어별 SEO 최적화

3. **이미지 관리**:
   - Gemini API를 통한 고품질 이미지 생성
   - Astro 이미지 최적화 시스템과 통합
   - 일관된 파일명 및 경로 관리

4. **토큰 최적화**:
   - 서브 에이전트를 활용한 컨텍스트 분리
   - 각 작업별 독립적인 컨텍스트 관리
   - 효율적인 토큰 사용

## 주의사항
1. `.env` 파일에 `GEMINI_API_KEY`가 설정되어 있어야 함
2. 생성된 이미지는 `src/assets/blog/` 디렉토리에 저장
3. 이미지 파일명은 URL-friendly하게 (소문자, 하이픈 사용)
4. 각 언어별 블로그 포스트는 별도 파일로 관리
5. 서브 에이전트를 통해 각 작업의 컨텍스트를 분리하여 토큰 사용량 최적화

## 예상 결과물
1. `.claude/agents/image-generator.md` - 이미지 생성 에이전트
2. `.claude/agents/writing-assistant.md` (수정) - 다국어 및 이미지 통합
3. `.claude/commands/write-post.md` - 블로그 작성 자동화 커맨드

## 다음 단계

1. **환경 설정**:
   - `.env` 파일에 `GEMINI_API_KEY` 추가
   - API 키는 [Google AI Studio](https://makersuite.google.com/app/apikey)에서 발급

2. **디렉토리 생성**:
   - `src/assets/blog/` 디렉토리 생성 (이미지 저장용)
   - `src/pages/ko/blog/`, `src/pages/ja/blog/`, `src/pages/en/blog/` 디렉토리 생성

3. **커맨드 테스트**:
   - `/write-post` 커맨드 실행하여 블로그 포스트 생성 테스트
   - 이미지 생성 및 다국어 지원 검증

4. **에이전트 협업 테스트**:
   - Writing Assistant와 Image Generator 간 협업 워크플로우 테스트
   - 생성된 파일 및 이미지 품질 검증

---

**작성일**: 2025-10-04
**완료일**: 2025-10-04
**상태**: ✅ 완료

**생성된 파일**:
- `.claude/agents/image-generator.md`
- `.claude/agents/writing-assistant.md` (수정)
- `.claude/commands/write-post.md`
- `working_history/03_에이전트_및_커맨드_수정.md`
